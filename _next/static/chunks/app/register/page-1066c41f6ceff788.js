(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4011],{8076:function(e,t,s){Promise.resolve().then(s.bind(s,8088))},8088:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return eO}});var a=s(57437),i=s(2265),r=s(53315),l=s(90535),n=s(94508);let o=i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,a.jsx)("div",{...i,ref:t})});o.displayName="Timeline";let d=i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,a.jsx)("div",{...i,ref:t,className:(0,n.cn)("flex gap-x-3",s)})});d.displayName="TimelineItem";let c=i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,a.jsx)("div",{className:"ps-2 my-2 first:mt-0",children:(0,a.jsx)("h3",{...i,ref:t,className:(0,n.cn)("text-xs font-medium uppercase text-muted-foreground",s)})})});c.displayName="TimelineItemLabel";let u=i.forwardRef((e,t)=>{let{className:s,hideLine:i,...r}=e;return(0,a.jsx)("div",{...r,ref:t,className:(0,n.cn)(!i&&"relative last:after:hidden after:absolute after:top-7 after:bottom-0 after:start-3.5 after:w-px after:-translate-x-[0.5px] after:bg-input",s)})});u.displayName="TimelineConnector";let m=(0,l.j)("flex shrink-0 justify-center items-center rounded-full",{variants:{variant:{default:"bg-primary text-primary-foreground",destructive:"bg-destructive text-destructive-foreground",outline:"border border-input bg-background",secondary:"bg-secondary text-secondary-foreground",accent:"bg-accent text-accent-foreground"},size:{default:"w-6 h-6",sm:"w-4 h-4",lg:"w-10 h-10"}},defaultVariants:{variant:"default",size:"default"}}),p=i.forwardRef((e,t)=>{let{className:s,variant:i,size:r,...l}=e;return(0,a.jsx)("div",{className:"relative z-10 w-7 h-7 flex justify-center items-center",children:(0,a.jsx)("div",{...l,ref:t,className:(0,n.cn)(m({variant:i,size:r,className:s}))})})});p.displayName="TimelineDot";let h=i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,a.jsx)("div",{...i,ref:t,className:(0,n.cn)("grow pt-0.5 pb-8",s)})});h.displayName="TimelineContent";let x=i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,a.jsx)("h3",{...i,ref:t,className:(0,n.cn)("font-semibold leading-none tracking-tight",s)})});x.displayName="TimelineContentLabel";let f=i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,a.jsx)("p",{...i,ref:t,className:(0,n.cn)("mt-1 text-sm text-muted-foreground",s)})});f.displayName="TimelineContentDescription";var v=s(53517),j=s(90258),g=s(30401);let N=e=>{let{label:t,description:s,isCompleted:i}=e;return(0,a.jsxs)(d,{children:[(0,a.jsx)(u,{children:(0,a.jsx)(p,{variant:i?"outline":"default",children:i&&(0,a.jsx)(g.Z,{className:"p-[2px]"})})}),(0,a.jsxs)(h,{children:[(0,a.jsx)(x,{children:t}),(0,a.jsx)(f,{children:s})]})]})};function b(e){let{state:t,...s}=e,i=t.allHeaderSubtitles.length;return(0,a.jsxs)(v.DD,{variant:"inset",...s,children:[(0,a.jsx)(v.$l,{children:(0,a.jsx)(v.w3,{children:(0,a.jsx)(v.LO,{children:(0,a.jsx)(v.bb,{size:"lg",asChild:!0,children:(0,a.jsxs)("a",{href:"#",children:[(0,a.jsx)("div",{className:"bg-sidebar-primary text-sidebar-primary-foreground flex aspect-square size-8 items-center justify-center rounded-lg",children:(0,a.jsx)(r.Z,{className:"size-4"})}),(0,a.jsxs)("div",{className:"grid flex-1 text-left text-sm leading-tight",children:[(0,a.jsx)("span",{className:"truncate font-medium",children:"Challenger"}),(0,a.jsx)("span",{className:"truncate text-xs",children:"Inscription"})]})]})})})})}),(0,a.jsx)(v.TZ,{children:(0,a.jsx)("div",{className:"p-4",children:(0,a.jsxs)(o,{children:[(0,a.jsx)(c,{children:"Suivis inscription"}),t.allHeaderSubtitles.map((e,s)=>(0,a.jsx)(N,{label:e,description:t.stepDone>s?"Termin\xe9":"En cours",isCompleted:t.stepDone>s},s)),(0,a.jsx)(c,{children:"Confirmation"}),(0,a.jsx)(N,{label:"Validation du BDS",description:t.stepDone>i?"Termin\xe9":"En cours",isCompleted:t.stepDone>i}),(0,a.jsx)(c,{children:"Paiement"}),(0,a.jsx)(N,{label:"Validation de paiement",description:t.stepDone>i+1?"Termin\xe9":"En cours",isCompleted:t.stepDone>i+1})]})})}),(0,a.jsx)(v.ZW,{children:(0,a.jsx)(j.r,{})})]})}var _=s(20423),y=s(9467),w=s(32660),C=s(76858),S=s(12381);let k=i.createContext(null);function z(){let e=i.useContext(k);if(!e)throw Error("useCarousel must be used within a <Carousel />");return e}let A=i.forwardRef((e,t)=>{let{orientation:s="horizontal",opts:r,setApi:l,plugins:o,className:d,children:c,...u}=e,[m,p]=(0,y.Z)({...r,axis:"horizontal"===s?"x":"y"},o),[h,x]=i.useState(!1),[f,v]=i.useState(!1),j=i.useCallback(e=>{e&&(x(e.canScrollPrev()),v(e.canScrollNext()))},[]),g=i.useCallback(()=>{null==p||p.scrollPrev()},[p]),N=i.useCallback(()=>{null==p||p.scrollNext()},[p]),b=i.useCallback(e=>{"ArrowLeft"===e.key?(e.preventDefault(),g()):"ArrowRight"===e.key&&(e.preventDefault(),N())},[g,N]);return i.useEffect(()=>{p&&l&&l(p)},[p,l]),i.useEffect(()=>{if(p)return j(p),p.on("reInit",j),p.on("select",j),()=>{null==p||p.off("select",j)}},[p,j]),(0,a.jsx)(k.Provider,{value:{carouselRef:m,api:p,opts:r,orientation:s||((null==r?void 0:r.axis)==="y"?"vertical":"horizontal"),scrollPrev:g,scrollNext:N,canScrollPrev:h,canScrollNext:f},children:(0,a.jsx)("div",{ref:t,onKeyDownCapture:b,className:(0,n.cn)("relative",d),role:"region","aria-roledescription":"carousel",...u,children:c})})});A.displayName="Carousel";let P=i.forwardRef((e,t)=>{let{className:s,...i}=e,{carouselRef:r,orientation:l}=z();return(0,a.jsx)("div",{ref:r,className:"overflow-hidden",children:(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex","horizontal"===l?"-ml-4":"-mt-4 flex-col",s),...i})})});P.displayName="CarouselContent";let q=i.forwardRef((e,t)=>{let{className:s,...i}=e,{orientation:r}=z();return(0,a.jsx)("div",{ref:t,role:"group","aria-roledescription":"slide",className:(0,n.cn)("min-w-0 shrink-0 grow-0 basis-full","horizontal"===r?"pl-4":"pt-4",s),...i})});q.displayName="CarouselItem",i.forwardRef((e,t)=>{let{className:s,variant:i="outline",size:r="icon",...l}=e,{orientation:o,scrollPrev:d,canScrollPrev:c}=z();return(0,a.jsxs)(S.z,{ref:t,variant:i,size:r,className:(0,n.cn)("absolute  h-8 w-8 rounded-full","horizontal"===o?"-left-12 top-1/2 -translate-y-1/2":"-top-12 left-1/2 -translate-x-1/2 rotate-90",s),disabled:!c,onClick:d,...l,children:[(0,a.jsx)(w.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Previous slide"})]})}).displayName="CarouselPrevious",i.forwardRef((e,t)=>{let{className:s,variant:i="outline",size:r="icon",...l}=e,{orientation:o,scrollNext:d,canScrollNext:c}=z();return(0,a.jsxs)(S.z,{ref:t,variant:i,size:r,className:(0,n.cn)("absolute h-8 w-8 rounded-full","horizontal"===o?"-right-12 top-1/2 -translate-y-1/2":"-bottom-12 left-1/2 -translate-x-1/2 rotate-90",s),disabled:!c,onClick:d,...l,children:[(0,a.jsx)(C.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Next slide"})]})}).displayName="CarouselNext";var I=s(31030),V=s(25779),Z=s(40785);let E=e=>{let{children:t}=e;return(0,a.jsx)(q,{children:(0,a.jsx)("div",{className:"grid gap-4 h-full p-4",children:t})})};var L=s(86700),B=s(75060),F=s(36576),R=s.n(F);s(54074);let T=e=>{let{value:t,onChange:s}=e;return(0,a.jsx)(R(),{value:t,onChange:s,country:"fr",enableSearch:!0,specialLabel:"",placeholder:"+33 6 06 06 06 06",inputClass:"flex h-10 w-full border-none bg-background rounded-md px-3 py-2 text-sm file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:outline-none focus-visible:ring-[2px] disabled:cursor-not-allowed disabled:opacity-50 dark:shadow-[0px_0px_1px_1px_var(--neutral-700)] group-hover/input:shadow-none transition duration-400",dropdownClass:"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2"})},D=e=>{var t;let{form:s}=e,{me:i}=(0,V.a)();return(0,a.jsxs)(E,{children:[(0,a.jsx)("h2",{className:"text-xl font-semibold",children:"Compl\xe9ment d'information te concernant"}),(0,a.jsxs)("div",{className:"w-full grid gap-8 lg:gap-12",style:{gridTemplateRows:"auto 1fr"},children:[(0,a.jsx)(I.L,{form:s,label:"Num\xe9ro de t\xe9l\xe9phone",id:"phone",input:e=>(0,a.jsx)(T,{...e})}),(0,a.jsx)(I.L,{form:s,label:"Cat\xe9gorie sportive",id:"sex",input:e=>(0,a.jsxs)(L.E,{onValueChange:e.onChange,defaultValue:e.value,value:e.value,children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(L.m,{value:"masculine",id:"masculine"}),(0,a.jsx)(B._,{htmlFor:"masculine",children:"Masculin"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(L.m,{value:"feminine",id:"feminine"}),(0,a.jsx)(B._,{htmlFor:"feminine",children:"F\xe9minin"})]})]})})]}),(0,a.jsxs)("div",{className:"text-md text-muted-foreground",children:[(0,a.jsxs)("p",{children:["D'apr\xe8s les informations fournies, tu es \xe9l\xe8ve \xe0 l'\xc9cole"," ",(0,a.jsx)("span",{className:"font-semibold",children:(0,Z.E)(null==i?void 0:null===(t=i.school)||void 0===t?void 0:t.name)})]}),(0,a.jsx)("p",{children:"Si ce n'est pas le cas, contactes ton BDS."})]})]})};var H=s(68245);let M=e=>{let{form:t}=e;return(0,a.jsxs)(E,{children:[(0,a.jsx)("h2",{className:"text-xl font-semibold",children:"Ta participation au Challenge"}),(0,a.jsxs)("div",{className:"w-full grid gap-8 lg:gap-12 lg:w-2/3",children:[(0,a.jsx)(I.L,{form:t,id:"is_athlete",input:e=>(0,a.jsxs)("div",{className:"flex items-center space-x-2 ",children:[(0,a.jsx)(H.X,{id:"is_athlete",checked:e.value,onCheckedChange:e.onChange}),(0,a.jsx)(B._,{htmlFor:"is_athlete",children:"Sportif"})]})}),(0,a.jsx)(I.L,{form:t,id:"is_pompom",input:e=>(0,a.jsxs)("div",{className:"flex items-center space-x-2 ",children:[(0,a.jsx)(H.X,{id:"is_pompom",checked:e.value,onCheckedChange:e.onChange}),(0,a.jsx)(B._,{htmlFor:"is_pompom",children:"Cheerleader"})]})}),(0,a.jsx)(I.L,{form:t,id:"is_fanfare",input:e=>(0,a.jsxs)("div",{className:"flex items-center space-x-2  ",children:[(0,a.jsx)(H.X,{id:"is_fanfare",checked:e.value,onCheckedChange:e.onChange}),(0,a.jsx)(B._,{htmlFor:"is_fanfare",children:"Fanfaron"})]})}),(0,a.jsx)(I.L,{form:t,id:"is_cameraman",input:e=>(0,a.jsxs)("div",{className:"flex items-center space-x-2  ",children:[(0,a.jsx)(H.X,{id:"is_cameraman",checked:e.value,onCheckedChange:e.onChange}),(0,a.jsx)(B._,{htmlFor:"is_cameraman",children:"Cam\xe9raman"})]})}),(0,a.jsxs)("div",{children:[(0,a.jsx)(I.L,{form:t,id:"is_volunteer",input:e=>(0,a.jsxs)("div",{className:"flex items-center space-x-2 ",children:[(0,a.jsx)(H.X,{id:"is_volunteer",checked:e.value,onCheckedChange:e.onChange}),(0,a.jsx)(B._,{htmlFor:"is_volunteer",children:"B\xe9n\xe9vole"})]})}),(0,a.jsx)("p",{className:"text-md text-muted-foreground ml-6 mt-2",children:"Ta place \xe0 la soir\xe9e du samedi te sera rembours\xe9 si tu remplis ton quota d'heures de b\xe9n\xe9volat"})]})]})]})};var U=s(15291),O=s(40279),G=s(74291),X=s(80670),J=s(45362),K=s(85598);let W=e=>{let{setIsOpen:t,onDropAccepted:s,multiple:r=!1,maxSize:l=10485760,accept:o={"image/*":[".jpg",".jpeg",".png"],"application/pdf":[".pdf"]}}=e,[d,c]=(0,i.useState)(!1),[u,m]=(0,i.useState)(""),p=l/1e6,h=Object.values(o).map(e=>e.map(e=>e.replaceAll(".","")).join(", ")).join(", ");return(0,a.jsx)(K.ZP,{accept:o,onDropAccepted:(e,a)=>{c(!1),t(!1),s(e,a)},onDropRejected:(e,t)=>{e[0].file.size>l?m("Fichier trop lourd (max: ".concat(p,"Mo)")):m("Type de fichier non support\xe9 (support\xe9: ".concat(h,")")),c(!0)},multiple:r,maxSize:l,children:e=>{let{getRootProps:t,getInputProps:s}=e;return(0,a.jsxs)(a.Fragment,{children:[d&&(0,a.jsx)("span",{className:"text-red-600 font-medium",children:u}),(0,a.jsx)("div",{...t({className:(0,n.cn)("container flex flex-col items-center justify-center w-full h-48 border-2 ".concat(d?"border-red-600":"border-gray-300"," border-dashed rounded-lg cursor-pointer"))}),children:(0,a.jsxs)("div",{className:"flex flex-col items-center gap-x-3 mt-2 mb-2",children:[(0,a.jsxs)("span",{className:"flex items-center space-x-2",children:[(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-6 h-6 text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2",children:(0,a.jsx)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),(0,a.jsxs)("span",{className:"font-medium text-gray-600",children:["Glissez et d\xe9posez votre fichier ici ou"," ",(0,a.jsx)("span",{className:"text-blue-600 underline",children:"s\xe9lectionnez un fichier"})]})]}),(0,a.jsx)("input",{...s()})]})})]})}})};var $=s(33145),Q=s(43643);let Y=i.forwardRef((e,t)=>{let{className:s,children:i,...r}=e;return(0,a.jsxs)(Q.fC,{ref:t,className:(0,n.cn)("relative overflow-hidden",s),...r,children:[(0,a.jsx)(Q.l_,{className:"h-full w-full rounded-[inherit]",children:i}),(0,a.jsx)(ee,{}),(0,a.jsx)(Q.Ns,{})]})});Y.displayName=Q.fC.displayName;let ee=i.forwardRef((e,t)=>{let{className:s,orientation:i="vertical",...r}=e;return(0,a.jsx)(Q.gb,{ref:t,orientation:i,className:(0,n.cn)("flex touch-none select-none transition-colors","vertical"===i&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===i&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",s),...r,children:(0,a.jsx)(Q.q4,{className:"relative flex-1 rounded-full bg-border"})})});ee.displayName=Q.gb.displayName;var et=s(29827),es=s(41494),ea=s(83464),ei=s(28207),er=s(18752);let el=()=>{(0,et.NL)();let{token:e,userId:t}=(0,ei.a)(),{data:s,refetch:a,isPending:i}=(0,es.Fsq)({headers:{Authorization:"Bearer ".concat(e)},pathParams:{userId:t}},{enabled:!!t,queryHash:"getDocument"});return{uploadDocument:(t,s,i)=>{let r=new FormData;r.append("certificate",t),ea.Z.post("".concat("https://hyperion.myecl.fr","/competition/participants/sports/").concat(s,"/certificate"),r,{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(e)}}).then(e=>{if(e.status>300){console.error(e.data),(0,er.Am)({title:"Erreur lors de l'ajout du document",description:"Une erreur est survenue, veuillez r\xe9essayer plus tard",variant:"destructive"});return}a(),i()})},data:s,refetch:a,isLoading:i}},en=e=>{let{setIsUploading:t,setIsOpen:s,field:r,sportId:l,form:n}=e,{uploadDocument:o,data:d}=el(),[c,u]=(0,i.useState)(d);return(0,a.jsx)(a.Fragment,{children:(null==c?void 0:c.size)!==void 0?(0,a.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(null==c?void 0:c.type)==="application/pdf"?(0,a.jsx)(Y,{className:"h-[400px]"}):(0,a.jsx)($.default,{src:URL.createObjectURL(c),alt:r.name,width:300,height:200,className:"rounded-lg w-auto max-h-[400px]"}),(0,a.jsx)(S.z,{className:"w-full",onClick:()=>{r.onChange(null),n.setValue("sport.certificate","Choisir un fichier"),u(void 0)},children:"Modifier"})]}):(0,a.jsx)(a.Fragment,{children:l?(0,a.jsx)(W,{setIsOpen:s,onDropAccepted:(e,s)=>{let a=e[0];t(!0),o(a,l,()=>{u(a),n.setValue("sport.certificate",a.name),t(!1)})}}):(0,a.jsx)("div",{className:"text-center text-sm text-muted-foreground",children:"Veuillez d'abord s\xe9lectionner un sport"})})})},eo=e=>{var t,s;let{form:r,sports:l}=e,{me:n}=(0,V.a)(),[o,d]=(0,i.useState)(""),[c,u]=(0,i.useState)(!1),[m,p]=(0,i.useState)(!1),[h,x]=(0,i.useState)(!1),{data:f}=el();(0,i.useEffect)(()=>{f&&r.setValue("sport.certificate","Certificat charg\xe9")},[f]);let{teams:v,createSchoolSportTeam:j,isCreateLoading:g}=(0,J.E)({schoolId:null==n?void 0:null===(t=n.school)||void 0===t?void 0:t.id,sportId:r.watch("sport.id")}),N=e=>{var t;j({name:e,sport_id:r.watch("sport.id"),school_id:null==n?void 0:null===(t=n.school)||void 0===t?void 0:t.id,captain_id:null==n?void 0:n.id},e=>{r.setValue("sport.team_id",e.id),u(!0)})},b=null==l?void 0:l.find(e=>e.id===r.watch("sport.id")),y=r.watch("sex");return(0,a.jsxs)(E,{children:[(0,a.jsx)("h2",{className:"text-xl font-semibold",children:"Ta participation au Challenge :"}),(0,a.jsx)(I.L,{form:r,label:"Sport",id:"sport.id",input:e=>(0,a.jsxs)(U.Ph,{onValueChange:e.onChange,value:e.value,children:[(0,a.jsx)(U.i4,{className:"w-60",children:(0,a.jsx)(U.ki,{placeholder:"S\xe9lectionnez un sport"})}),l&&(0,a.jsx)(U.Bw,{children:l.filter(e=>null===e.sport_category||void 0===e.sport_category||e.sport_category===y).map(e=>(0,a.jsx)(U.Ql,{value:e.id,children:e.name},e.id))})]})}),(null!==(s=null==b?void 0:b.team_size)&&void 0!==s?s:0)>1&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(I.L,{form:r,label:"Capitaine d'\xe9quipe",id:"sport.team_leader",input:e=>(0,a.jsxs)("div",{className:"flex items-center space-x-2 pt-2 ",children:[(0,a.jsx)(H.X,{id:"sport.team_leader",checked:e.value,onCheckedChange:e.onChange}),(0,a.jsx)(B._,{htmlFor:"sport.team_leader",children:"Je suis capitaine d'\xe9quipe"})]})}),r.watch("sport.team_leader")?(0,a.jsx)(X.xJ,{className:"w-full",children:(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)(X.lX,{className:"text-base",children:"Cr\xe9ation de l'\xe9quipe"}),(0,a.jsx)(X.NI,{children:(0,a.jsxs)("div",{className:"flex flex-col gap-4 lg:flex-row w-2/3",children:[(0,a.jsx)(O.I,{placeholder:"Nom de l'\xe9quipe",value:o,onChange:e=>d(e.target.value),className:"w-60"}),(0,a.jsx)(_.f,{variant:"outline",className:"w-60",onClick:()=>N(o),disabled:!r.watch("sport.team_leader")||0===o.length||c,isLoading:g,children:"Ajouter l'\xe9quipe"})]})}),(0,a.jsx)(X.zG,{})]})}):(0,a.jsxs)("div",{className:"flex flex-col gap-4 lg:flex-row w-2/3",children:[(0,a.jsx)(I.L,{form:r,label:"\xc9quipe",id:"sport.team_id",input:e=>v&&0!==v.length?(0,a.jsxs)(U.Ph,{onValueChange:e.onChange,value:e.value,children:[(0,a.jsx)(U.i4,{className:"w-60",children:(0,a.jsx)(U.ki,{placeholder:"S\xe9lectionnez une \xe9quipe"})}),(0,a.jsx)(U.Bw,{children:v.map(e=>(0,a.jsx)(U.Ql,{value:e.id,children:e.name},e.id))})]}):(0,a.jsx)("p",{children:"Aucune \xe9quipe enregistr\xe9e pour ce sport."})}),(0,a.jsx)(I.L,{form:r,label:"Rempla\xe7ant d'\xe9quipe",id:"sport.substitute",input:e=>(0,a.jsxs)("div",{className:"flex items-center space-x-2 pt-2 ",children:[(0,a.jsx)(H.X,{id:"sport.substitute",checked:e.value,onCheckedChange:e.onChange}),(0,a.jsx)(B._,{htmlFor:"sport.substitute",children:"Je suis rempla\xe7ant"})]})})]})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-4 lg:flex-row w-2/3",children:[(0,a.jsx)(I.L,{form:r,label:"Num\xe9ro de licence",id:"sport.license_number",input:e=>(0,a.jsx)(O.I,{...e,className:"w-60"})}),(0,a.jsx)(I.L,{form:r,label:"Certificat m\xe9dical",id:"sport.certificate",input:e=>{var t;return(0,a.jsx)("div",{className:"col-span-4 gap-2 grid grid-cols-3",children:(0,a.jsxs)(G.Vq,{open:h,onOpenChange:x,children:[(0,a.jsx)(X.zG,{}),(0,a.jsx)(G.hg,{asChild:!0,children:(0,a.jsx)(S.z,{variant:"outline",className:"col-span-3",disabled:m,children:(0,a.jsx)("div",{className:"flex flex-row items-start w-full",children:(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("span",{className:"text-gray-500 overflow-hidden",children:null!==(t=r.watch("sport.certificate"))&&void 0!==t?t:"Aucun fichier s\xe9l\xe9ctionn\xe9"})})})})}),(0,a.jsxs)(G.cZ,{className:"md:max-w-2xl top-1/2",children:[(0,a.jsx)(G.fK,{children:(0,a.jsx)(G.$N,{className:"text-red sm:text-lg",children:"Ajouter un certificat m\xe9dical"})}),(0,a.jsx)(en,{setIsOpen:x,setIsUploading:p,field:e,form:r,sportId:r.watch("sport.id")})]})]})})}})]})]})},ed=()=>{let{token:e,isTokenExpired:t}=(0,ei.a)(),{data:s,refetch:a,error:i}=(0,es.vHv)({headers:{Authorization:"Bearer ".concat(e)}},{enabled:!t(),retry:0,queryHash:"getProducts"});return{availableProducts:s,error:i,refetchAvailableProducts:a}},ec=e=>{let{form:t}=e,{availableProducts:s}=ed(),i=t.watch("products"),r=i.map(e=>e.product.id),l={};null==s||s.forEach(e=>{!0===e.enabled&&(l[e.product_id]||(l[e.product_id]=[]),l[e.product_id].push(e))});let n={};return Object.entries(l).forEach(e=>{let[t,s]=e;n[t]=s.filter(e=>r.includes(e.id)).map(e=>e.id)}),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("h2",{className:"text-xl font-semibold",children:"Ta formule :"}),Object.entries(l).map(e=>{let[l,o]=e,d=o[0],c=i.find(e=>e.product.id===d.id);return(0,a.jsx)(I.L,{form:t,label:d.product.name,id:"products[".concat(l,"]"),input:e=>(0,a.jsx)(a.Fragment,{children:o.length>1?(0,a.jsxs)("div",{className:"flex items-center space-x-2 pt-2",children:[(0,a.jsx)(L.E,{onValueChange:e=>{t.setValue("products",[...i.filter(e=>e.product.id!==n[l][0]),{product:null==s?void 0:s.find(t=>t.id===e),quantity:1}])},defaultValue:n[l][0]||"",value:n[l][0]||"",children:o.map(e=>(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(L.m,{value:e.id,id:"product-".concat(e.id)}),(0,a.jsxs)(B._,{htmlFor:"product-".concat(e.id),children:[e.name," - ",e.price/100,"€"]})]},e.id))}),(0,a.jsx)(a.Fragment,{children:!d.unique&&r.includes(d.id)&&(0,a.jsx)(O.I,{type:"number",min:1,value:(null==c?void 0:c.quantity)||1,onChange:e=>{let s=Math.max(1,Math.min(99,Number(e.target.value)));t.setValue("products",i.map(e=>e.product.id===d.id?{...e,quantity:s}:e))},className:"ml-2 w-16"})})]}):(0,a.jsxs)("div",{className:"flex items-center space-x-2 pt-2",children:[(0,a.jsx)(H.X,{id:"products[".concat(l,"]"),value:d.id,checked:r.includes(d.id),onCheckedChange:()=>{if(r.includes(d.id)){t.setValue("products",i.filter(e=>e.product.id!==d.id));return}t.setValue("products",[...i.filter(e=>e.product.id!==l),{product:d,quantity:1}])}}),(0,a.jsxs)(B._,{htmlFor:"products[".concat(l,"]"),children:[d.name," - ",d.price/100,"€"]}),!d.unique&&r.includes(d.id)&&(0,a.jsx)(O.I,{type:"number",min:1,value:(null==c?void 0:c.quantity)||1,onChange:e=>{let s=Math.max(1,Math.min(99,Number(e.target.value)));t.setValue("products",i.map(e=>e.product.id===d.id?{...e,quantity:s}:e))},className:"ml-2 w-16"})]})})},l)})]})};var eu=s(92451),em=s(10407),ep=s(27875),eh=s(69174),ex=s(92934);let ef=e=>{var t,s,i,r,l;let{form:n}=e,{me:o}=(0,V.a)(),{teams:d}=(0,J.E)({schoolId:null==o?void 0:o.school_id,sportId:null===(t=n.getValues().sport)||void 0===t?void 0:t.id}),{sports:c}=(0,ep.V)(),u=n.getValues(),m=(null===(s=u.sport)||void 0===s?void 0:s.id)?null==c?void 0:c.find(e=>{var t;return e.id===(null===(t=u.sport)||void 0===t?void 0:t.id)}):void 0;return(0,a.jsx)(E,{children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold",children:"R\xe9capitulatif de ton inscription"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h3",{className:"font-semibold",children:"Informations personnelles"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Pr\xe9nom"}),(0,a.jsx)("p",{children:(null==o?void 0:o.firstname)||"-"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Nom"}),(0,a.jsx)("p",{children:(null==o?void 0:o.name)||"-"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"\xc9cole"}),(0,a.jsx)("p",{children:(null==o?void 0:o.school_id)?(0,Z.E)(null==o?void 0:null===(i=o.school)||void 0===i?void 0:i.name):"-"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"T\xe9l\xe9phone"}),(0,a.jsx)("p",{children:u.phone||"-"})]})]})]}),(0,a.jsx)("div",{className:"space-y-2",children:(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold",children:"Participation"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-2 mt-2",children:[u.is_athlete&&u.sport&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(ex.Z,{className:"h-4 w-4 text-green-500"}),(0,a.jsx)("p",{className:"text-sm font-medium",children:"Sportif"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2 mt-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Sport"}),(0,a.jsxs)("p",{children:[(null==m?void 0:m.name)||"-"," ",u.sex?"(".concat(u.sex,")"):""]})]}),u.sport.team_id&&(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"\xc9quipe"}),(0,a.jsxs)("p",{children:[(null==d?void 0:null===(r=d.find(e=>{var t;return e.id===(null===(t=u.sport)||void 0===t?void 0:t.team_id)}))||void 0===r?void 0:r.name)||"-"," ",(null===(l=u.sport)||void 0===l?void 0:l.team_leader)?"(capitaine)":""]})]})]})]}),u.is_cameraman&&(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(ex.Z,{className:"h-4 w-4 text-green-500"}),(0,a.jsx)("p",{className:"text-sm",children:"Cam\xe9raman"})]}),u.is_fanfare&&(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(ex.Z,{className:"h-4 w-4 text-green-500"}),(0,a.jsx)("p",{className:"text-sm",children:"Fanfaron"})]}),u.is_pompom&&(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(ex.Z,{className:"h-4 w-4 text-green-500"}),(0,a.jsx)("p",{className:"text-sm",children:"Pompom"})]}),u.is_volunteer&&(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(ex.Z,{className:"h-4 w-4 text-green-500"}),(0,a.jsx)("p",{className:"text-sm",children:"B\xe9n\xe9vole"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h3",{className:"font-semibold",children:"Produits s\xe9lectionn\xe9s"}),u.products&&u.products.length>0?(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-2 mt-2",children:[u.products.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(ex.Z,{className:"h-4 w-4 text-green-500"}),(0,a.jsxs)("p",{className:"text-sm",children:[e.product.name,e.quantity>1&&" (x".concat(e.quantity,")")," ","-"," ",(0,a.jsxs)("span",{className:"font-semibold",children:[e.product.price/100,"€"]})]})]},t)),(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Total:"}),(0,a.jsxs)(eh.C,{variant:"outline",children:[u.products.reduce((e,t)=>e+t.product.price/100*t.quantity,0).toFixed(2),"€"]})]})]}):(0,a.jsx)("div",{className:"grid grid-cols-1 gap-2 mt-2",children:(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Aucun produit s\xe9lectionn\xe9"})})]})]})})]})})},ev=e=>{let{form:t,isLoading:s,onSubmit:r,sports:l,setState:n,state:o,api:d,setApi:c}=e,u=t.watch("is_athlete");return(0,i.useEffect)(()=>{let e=t.watch("is_athlete"),s=[...o.allHeaderSubtitles];e&&"Sport"!==o.allHeaderSubtitles[2]?s.splice(2,0,"Sport"):"Sport"===o.allHeaderSubtitles[2]&&s.splice(2,1),n({...o,allHeaderSubtitles:s,stepDone:Math.min(o.stepDone,2)})},[u]),(0,a.jsxs)("div",{className:"gap-6 p-8 w-full flex flex-col h-[calc(100vh-12rem)]",children:[(0,a.jsx)(A,{setApi:c,opts:{watchDrag:!1},children:(0,a.jsxs)(P,{className:"h-[calc(100vh-16rem)]",draggable:!1,children:[(0,a.jsx)(D,{form:t}),(0,a.jsx)(M,{form:t}),u&&(0,a.jsx)(eo,{form:t,sports:l}),(0,a.jsx)(E,{children:(0,a.jsx)(ec,{form:t})}),(0,a.jsx)(ef,{form:t})]})}),(0,a.jsxs)("div",{className:"flex justify-start mt-4 gap-4",children:[(0,a.jsx)(S.z,{size:"icon",onClick:()=>{null==d||d.scrollPrev(),n({...o,currentStep:Math.max(0,o.currentStep-1),headerSubtitle:o.allHeaderSubtitles[Math.max(0,o.currentStep-1)]})},disabled:!(null==d?void 0:d.canScrollPrev()),children:(0,a.jsx)(eu.Z,{className:"h-4 w-4"})}),(null==d?void 0:d.canScrollNext())?(0,a.jsx)(S.z,{size:"icon",onClick:()=>{t.trigger().then(e=>{(e||o.pageFields[o.headerSubtitle].every(e=>!t.getFieldState(e).invalid))&&o.onValidateCardActions[o.headerSubtitle](t.getValues(),()=>{null==d||d.scrollNext(),n({...o,stepDone:Math.max(o.stepDone,o.currentStep+1),currentStep:Math.min(3,o.currentStep+1),headerSubtitle:o.allHeaderSubtitles[o.currentStep+1]})})})},children:(0,a.jsx)(em.Z,{className:"h-4 w-4"})}):(0,a.jsx)(_.f,{isLoading:s,className:"w-[200px]",type:"submit",onClick:()=>r(t.getValues()),children:"S'inscrire"})]})]})};var ej=s(25187),eg=s(79820),eN=s(15868),eb=s(67740);let e_=e=>{let{userId:t}=e,{token:s,isTokenExpired:a}=(0,ei.a)(),{isAdmin:i}=(0,V.a)(),{data:r,refetch:l,error:n}=(0,es.FTA)({headers:{Authorization:"Bearer ".concat(s)},pathParams:{userId:null!=t?t:""}},{enabled:i()&&!a()&&!!t,retry:0,queryHash:"getUserPurchases"}),{mutate:o,isPending:d}=(0,es.un_)(),{mutate:c,isPending:u}=(0,es._3m)();return{userPurchases:r,error:n,refetchUserPurchases:l,createPurchase:(e,t)=>o({headers:{Authorization:"Bearer ".concat(s)},body:e},{onSettled:(e,s)=>{s.stack.body||s.stack.detail?(console.log(s),(0,er.Am)({title:"Erreur lors de l'ajout de la variante",description:s.stack.body||s.stack.detail,variant:"destructive"})):(l(),t(),(0,er.Am)({title:"Variante ajout\xe9e",description:"La variante a \xe9t\xe9 ajout\xe9e avec succ\xe8s."}))}}),isCreatePurchaseLoading:d,deletePurchase:(e,t)=>c({headers:{Authorization:"Bearer ".concat(s)},pathParams:{productVariantId:e}},{onSettled:(e,s)=>{s.stack.body||s.stack.detail?(console.log(s),(0,er.Am)({title:"Erreur lors de la suppression de la variante",description:s.stack.body||s.stack.detail,variant:"destructive"})):(l(),t(),(0,er.Am)({title:"Variante supprim\xe9e",description:"La variante a \xe9t\xe9 supprim\xe9e avec succ\xe8s."}))}}),isDeletePurchaseLoading:u}},ey=e=>{var t,s;let{onEdit:i}=e,{me:r}=(0,V.a)(),{availableProducts:l}=ed(),{meCompetition:n}=(0,ej.s)(),{meParticipant:o}=(0,eb.a)(),{sports:d}=(0,ep.V)(),{teams:c}=(0,J.E)({schoolId:null==r?void 0:r.school_id,sportId:null==o?void 0:o.sport_id}),{userPurchases:u}=e_({userId:null==r?void 0:r.id}),m=null==u?void 0:u.map(e=>null==l?void 0:l.find(t=>t.id===e.product_variant_id)),p=null==m?void 0:m.reduce((e,t)=>{if(t){var s;return e+t.price*((null==u?void 0:null===(s=u.find(e=>e.product_variant_id===t.id))||void 0===s?void 0:s.quantity)||1)/100}return e},0),h=null==c?void 0:c.find(e=>e.id===(null==o?void 0:o.team_id));return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("h2",{className:"text-xl font-semibold",children:"R\xe9capitulatif de ton inscription"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h3",{className:"font-semibold",children:"Informations personnelles"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Pr\xe9nom"}),(0,a.jsx)("p",{children:(null==r?void 0:r.firstname)||"-"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Nom"}),(0,a.jsx)("p",{children:(null==r?void 0:r.name)||"-"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"\xc9cole"}),(0,a.jsx)("p",{children:(null==r?void 0:r.school_id)?(0,Z.E)(null==r?void 0:null===(t=r.school)||void 0===t?void 0:t.name):"-"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"T\xe9l\xe9phone"}),(0,a.jsx)("p",{children:(null==r?void 0:r.phone)||"-"})]})]})]}),(0,a.jsx)("div",{className:"space-y-2",children:(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold",children:"Participation"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-2 mt-2",children:[(null==n?void 0:n.is_athlete)&&o&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(ex.Z,{className:"h-4 w-4 text-green-500"}),(0,a.jsx)("p",{className:"text-sm font-medium",children:"Sportif"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2 mt-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Sport"}),(0,a.jsxs)("p",{children:[(null==d?void 0:null===(s=d.find(e=>e.id===o.sport_id))||void 0===s?void 0:s.name)||"-"," ",(null==n?void 0:n.sport_category)?"(".concat(n.sport_category,")"):""]})]}),o.team_id&&(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"\xc9quipe"}),(0,a.jsxs)("p",{children:[(null==h?void 0:h.name)||"-"," ",(null==h?void 0:h.captain_id)===(null==r?void 0:r.id)?"(capitaine)":""]})]})]})]}),(null==n?void 0:n.is_cameraman)&&(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(ex.Z,{className:"h-4 w-4 text-green-500"}),(0,a.jsx)("p",{className:"text-sm",children:"Cam\xe9raman"})]}),(null==n?void 0:n.is_fanfare)&&(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(ex.Z,{className:"h-4 w-4 text-green-500"}),(0,a.jsx)("p",{className:"text-sm",children:"Fanfaron"})]}),(null==n?void 0:n.is_pompom)&&(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(ex.Z,{className:"h-4 w-4 text-green-500"}),(0,a.jsx)("p",{className:"text-sm",children:"Pompom"})]}),(null==n?void 0:n.is_volunteer)&&(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(ex.Z,{className:"h-4 w-4 text-green-500"}),(0,a.jsx)("p",{className:"text-sm",children:"B\xe9n\xe9vole"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("h3",{className:"font-semibold",children:"Produits s\xe9lectionn\xe9s"}),i&&(0,a.jsx)("button",{type:"button",className:"p-1 rounded hover:bg-muted transition-colors","aria-label":"Modifier les produits",onClick:i,children:(0,a.jsx)(eN.Z,{className:"h-4 w-4 text-primary"})})]}),u&&u.length>0?(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-2 mt-2",children:[u.map((e,t)=>{let s=null==l?void 0:l.find(t=>t.id===e.product_variant_id);return s?(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(ex.Z,{className:"h-4 w-4 text-green-500"}),(0,a.jsxs)("p",{className:"text-sm",children:[s.product.name,e.quantity>1&&" (x".concat(e.quantity,")")," ","-"," ",(0,a.jsxs)("span",{className:"font-semibold",children:[s.price*e.quantity/100,"€"]})]})]},t):null}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Total:"}),(0,a.jsxs)(eh.C,{variant:"outline",children:[null==p?void 0:p.toFixed(2),"€"]})]})]}):(0,a.jsx)("div",{className:"grid grid-cols-1 gap-2 mt-2",children:(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Aucun produit s\xe9lectionn\xe9"})})]})]})})]})};var ew=s(91115);let eC=ew.z.object({products:ew.z.array(ew.z.object({product:ew.z.custom(),quantity:ew.z.number().min(1)}))});var eS=s(29501),ek=s(13590),ez=s(49027);let eA=()=>{let{availableProducts:e}=ed(),[t,s]=(0,i.useState)(!1),[r,l]=(0,i.useState)(!1),{me:n}=(0,V.a)(),{userPurchases:o,createPurchase:d,deletePurchase:c}=e_({userId:null==n?void 0:n.id}),u=(0,eS.cI)({resolver:(0,ek.F)(eC),mode:"onChange",defaultValues:{products:(null==o?void 0:o.map(t=>{let s=null==e?void 0:e.find(e=>e.id===t.product_variant_id);if(s)return{product:s,quantity:t.quantity}}).filter(e=>void 0!==e))||[]}});async function m(t){l(!0);let a=t.products,i=e?e.filter(e=>!0===e.product.required).map(e=>e.id):[],r=a.map(e=>e.product.id);if(!i.every(e=>r.includes(e))){for(let t of i)if(!r.includes(t)){var n;let s=null==e?void 0:null===(n=e.find(e=>e.product_id===t))||void 0===n?void 0:n.product.name,i=a.findIndex(e=>e.product.id===t);u.setError(-1!==i?"products.".concat(i):"products",{type:"manual",message:"Le produit ".concat(s," est requis.")})}return}let m=a.filter(e=>!(null==o?void 0:o.some(t=>t.product_variant_id===e.product.id&&t.quantity===e.quantity))),p=null==o?void 0:o.filter(e=>!a.some(t=>t.product.id===e.product_variant_id));null==p||p.map(e=>{c(e.product_variant_id,()=>{})}),m.map(e=>{d({product_variant_id:e.product.id,quantity:e.quantity},()=>{})}),l(!1),s(!1)}return(0,a.jsx)("div",{className:"flex w-full flex-col p-12 pt-6",children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)(eg.Zb,{className:"p-6 bg-red-700 text-white border-red-800 shadow-md shadow-red-500/50",children:[(0,a.jsx)(eg.ll,{children:"En attente de validation"}),(0,a.jsx)(eg.SZ,{className:"text-white",children:"Ton inscription est en cours de validation par ton BDS."})]}),(0,a.jsxs)(G.Vq,{open:t,onOpenChange:s,children:[(0,a.jsx)(ez.$N,{className:"text-2xl font-bold mb-4",children:"Modifier ma formule"}),(0,a.jsx)(ey,{onEdit:()=>s(!0)}),(0,a.jsx)(G.cZ,{children:(0,a.jsx)(X.l0,{...u,children:(0,a.jsxs)("form",{onSubmit:u.handleSubmit(m),className:"space-y-4",children:[(0,a.jsx)(ec,{form:u}),(0,a.jsx)(_.f,{type:"submit",isLoading:r,children:"Valider"})]})})})]})]})})};var eP=s(88226),eq=s(12770),eI=s(20653);let eV=e=>{let{isLoading:t,onClick:s}=e;return(0,a.jsxs)(S.z,{className:"border-[#3d33a6] group-hover:border-[#3d33a6] p-0 group",variant:"outline",disabled:t,onClick:s,children:[(0,a.jsxs)("svg",{width:"46",viewBox:"20 0 40 50",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"pl-3 w-14",children:[(0,a.jsxs)("g",{"clip-path":"url(#clip0_16_2460)",children:[(0,a.jsx)("path",{d:"M28.7465 34.0888C24.2637 28.8367 27.2522 15.5602 29.1589 15.5602C25.477 15.4863 19.2669 17.9752 20.1037 26.856C20.428 29.479 21.4172 31.9676 22.9717 34.071C24.5263 36.1745 26.5912 37.8184 28.9584 38.8373C31.3257 39.8562 33.9116 40.2139 36.4558 39.8746C38.9999 39.5352 41.4123 38.5107 43.4499 36.9043C36.409 42.0947 31.6364 37.468 28.7465 34.0888Z",fill:"url(#paint0_linear_16_2460)"}),(0,a.jsx)("path",{d:"M45.1931 25.1679C41.4695 32.8474 30.0474 36.0787 28.7563 34.1011C30.9888 37.4433 36.5265 42.1101 43.5046 36.8734C45.5247 35.2573 47.0962 33.1214 48.0613 30.6806C49.0264 28.2397 49.3509 25.58 49.0022 22.9689C48.6536 20.3577 47.6441 17.8872 46.0752 15.8059C44.5063 13.7245 42.4334 12.1056 40.0649 11.1121C47.9515 14.7223 47.1536 21.1234 45.1931 25.1679Z",fill:"url(#paint1_linear_16_2460)"}),(0,a.jsx)("path",{d:"M29.1602 15.5613C37.2292 14.671 46.3531 23.1852 45.1936 25.169C47.4648 21.2015 47.9848 14.7234 40.1131 11.1132C37.7418 10.118 35.1584 9.78278 32.6218 10.1412C30.0853 10.4996 27.6847 11.5391 25.6607 13.1554C23.6368 14.7716 22.0606 16.9079 21.0902 19.35C20.1199 21.7922 19.7894 24.4543 20.1319 27.0696C19.5611 18.2381 26.1478 15.8939 29.1602 15.5613Z",fill:"url(#paint2_linear_16_2460)"})]}),(0,a.jsxs)("linearGradient",{id:"paint0_linear_16_2460",x1:"23.1041",y1:"17.5615",x2:"36.9885",y2:"40.8976",gradientUnits:"userSpaceOnUse",children:[(0,a.jsx)("stop",{"stop-color":"#3B8964"}),(0,a.jsx)("stop",{offset:"0.25","stop-color":"#5ABF8C"})]}),(0,a.jsxs)("linearGradient",{id:"paint1_linear_16_2460",x1:"33.6387",y1:"38.5088",x2:"48.0033",y2:"15.916",gradientUnits:"userSpaceOnUse",children:[(0,a.jsx)("stop",{"stop-color":"#803471"}),(0,a.jsx)("stop",{offset:"0.21","stop-color":"#B34F9E"})]}),(0,a.jsxs)("linearGradient",{id:"paint2_linear_16_2460",x1:"22.2234",y1:"16.1265",x2:"45.6611",y2:"24.404",gradientUnits:"userSpaceOnUse",children:[(0,a.jsx)("stop",{offset:"0.6","stop-color":"#F99C2E"}),(0,a.jsx)("stop",{offset:"1","stop-color":"#C57538"})]}),(0,a.jsx)("clipPath",{id:"clip0_16_2460",children:(0,a.jsx)("rect",{width:"30",height:"30",fill:"white",transform:"translate(20 10)"})}),(0,a.jsx)("clipPath",{id:"clip1_16_2460",children:(0,a.jsx)("rect",{width:"72",height:"22",fill:"white",transform:"translate(173 14)"})})]}),(0,a.jsx)("span",{className:"text-white bg-[#4C40CF] group-hover:bg-[#3d33a6] h-full justify-center flex items-center rounded-r-sm w-[165px]",children:t?(0,a.jsx)(eI.BGW,{className:"h-4 w-4 animate-spin"}):(0,a.jsxs)(a.Fragment,{children:["Payer avec ",(0,a.jsx)("span",{className:"font-bold ml-1",children:"helloasso"})]})})]})},eZ=()=>{let{token:e,isTokenExpired:t}=(0,ei.a)(),{mutate:s,isPending:a}=(0,es.YwG)();return{getPaymentUrl:t=>s({headers:{Authorization:"Bearer ".concat(e)}},{onSettled:(e,s)=>{s.stack.body||s.stack.detail?(console.log(s),(0,er.Am)({title:"Erreur lors de la cr\xe9ation de l'URL de paiement",description:s.stack.body||s.stack.detail,variant:"destructive"})):(null==e?void 0:e.url)&&(t(e.url),(0,er.Am)({title:"Redirection vers le paiement",description:"Vous allez \xeatre redirig\xe9 vers HelloAsso."}))}}),isPaymentLoading:a}};var eE=s(51945);let eL=()=>{let[e,t]=(0,i.useState)(!1),{getPaymentUrl:s,isPaymentLoading:r}=eZ(),{hasPaid:l,isLoading:n,refetchPayments:o}=(0,eE.T)();return(0,a.jsx)("div",{className:"flex w-full flex-col p-12 pt-6",children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)(eg.Zb,{className:"p-6 bg-green-700 text-white border-green-800 shadow-md shadow-green-500/50",children:[(0,a.jsxs)(eg.ll,{className:"flex items-center gap-2",children:[(0,a.jsx)(ex.Z,{className:"h-5 w-5"}),"Inscription valid\xe9e"]}),(0,a.jsx)(eg.SZ,{className:"text-white",children:"F\xe9licitations ! Ton inscription a \xe9t\xe9 valid\xe9e par ton BDS. Tu recevras bient\xf4t plus d'informations par e-mail concernant la comp\xe9tition."})]}),!n&&!l&&(0,a.jsxs)(eg.Zb,{className:"p-6 bg-gray-50 border-gray-200",children:[(0,a.jsxs)(eg.ll,{className:"flex items-center gap-2 text-gray-800",children:[(0,a.jsx)(eP.Z,{className:"h-5 w-5"}),"Finaliser votre inscription"]}),(0,a.jsx)(eg.SZ,{className:"text-gray-700 mb-4",children:"Pour compl\xe9ter votre inscription, veuillez proc\xe9der au paiement de votre participation \xe0 la comp\xe9tition."}),(0,a.jsx)(eq.Z,{isOpened:e,setIsOpened:t,isLoading:r,title:"Proc\xe9der au paiement",description:(0,a.jsx)("p",{children:"Vous allez \xeatre redirig\xe9s vers HelloAsso pour proc\xe9der au paiement. HelloAsso est une entreprise fran\xe7aise proposant des solutions de paiement pour les associations. Elle se finance uniquement par des dons. Par d\xe9faut, HelloAsso vous proposera de faire un don (nomm\xe9 'contribution volontaire'), vous pouvez refuser de le faire sans compromettre le paiement. Si vous choisissez de faire un don, seul HelloAsso en b\xe9n\xe9ficiera."}),customButton:(0,a.jsx)(eV,{isLoading:r,onClick:()=>{s(e=>{t(!1),o(),window.location.href=e})}})}),(0,a.jsxs)(S.z,{className:"w-full sm:w-auto",onClick:()=>t(!0),disabled:r,children:[(0,a.jsx)(eP.Z,{className:"h-4 w-4 mr-2"}),"Proc\xe9der au paiement"]})]}),!n&&l&&(0,a.jsxs)(eg.Zb,{className:"p-6 bg-green-100 border-green-300",children:[(0,a.jsxs)(eg.ll,{className:"flex items-center gap-2 text-green-800",children:[(0,a.jsx)(ex.Z,{className:"h-5 w-5"}),"Paiement effectu\xe9"]}),(0,a.jsx)(eg.SZ,{className:"text-green-700",children:"Votre paiement a \xe9t\xe9 effectu\xe9 avec succ\xe8s. Votre inscription est maintenant compl\xe8te !"})]}),(0,a.jsx)(ey,{})]})})};var eB=s(99376);let eF=e=>{let{setState:t,state:s,form:r}=e,[l,n]=(0,i.useState)(void 0),[o,d]=(0,i.useState)(!1),{sports:c}=(0,ep.V)(),{me:u}=(0,V.a)(),{meCompetition:m}=(0,ej.s)(),{meParticipant:p}=(0,eb.a)(),{userPurchases:h}=e_({userId:null==u?void 0:u.id}),x=(0,eB.useRouter)();async function f(e){d(!0),x.push("/")}return(0,i.useEffect)(()=>{r.setValue("phone",(null==u?void 0:u.phone)||(null==m?void 0:m.user.phone)||""),r.setValue("sex",(null==m?void 0:m.sport_category)||"masculine"),r.setValue("is_athlete",(null==m?void 0:m.is_athlete)||!1),r.setValue("is_cameraman",(null==m?void 0:m.is_cameraman)||!1),r.setValue("is_fanfare",(null==m?void 0:m.is_fanfare)||!1),r.setValue("is_pompom",(null==m?void 0:m.is_pompom)||!1),r.setValue("is_volunteer",(null==m?void 0:m.is_volunteer)||!1)},[r,u,m]),(0,i.useEffect)(()=>{let e=[...s.allHeaderSubtitles];if((null==m?void 0:m.is_athlete)&&"Sport"!==s.allHeaderSubtitles[2]?e.splice(2,0,"Sport"):"Sport"===s.allHeaderSubtitles[2]&&e.splice(2,1),(null==m?void 0:m.is_athlete)&&void 0===p&&"Sport"!==s.allHeaderSubtitles[2]){t({...s,currentStep:3,stepDone:2,headerSubtitle:"Sport",allHeaderSubtitles:e}),null==l||l.scrollTo(2);return}if(void 0===h||0===h.length){t({...s,currentStep:p?4:3,stepDone:p?3:2,headerSubtitle:"Panier",allHeaderSubtitles:e});return}if(m&&!m.validated){t({...s,currentStep:p?5:4,stepDone:p?5:4,headerTitle:"Confirmation de l'inscription",headerSubtitle:"R\xe9capitulatif",allHeaderSubtitles:e});return}m&&m.validated?t({...s,currentStep:p?6:5,stepDone:p?6:5,headerTitle:"Paiement",headerSubtitle:"R\xe9capitulatif",allHeaderSubtitles:e}):t({...s,allHeaderSubtitles:e})},[m,p]),void 0===m||m.is_athlete&&void 0===p?(0,a.jsx)(X.l0,{...r,children:(0,a.jsx)("form",{onSubmit:r.handleSubmit(()=>{}),children:(0,a.jsx)(ev,{form:r,sports:c,isLoading:o,onSubmit:f,setState:t,state:s,api:l,setApi:n})})}):(0,a.jsxs)(a.Fragment,{children:[m&&!m.validated&&(0,a.jsx)(eA,{}),m&&m.validated&&(0,a.jsx)(eL,{})]})};var eR=s(30021),eT=s(31593),eD=s(67341);let eH=ew.z.object({phone:ew.z.string({required_error:"Veuillez renseigner le num\xe9ro de t\xe9l\xe9phone"}).refine(e=>(0,eD.y)(e,"FR"),"Veuillez renseigner un num\xe9ro de t\xe9l\xe9phone valide"),is_athlete:ew.z.boolean(),is_cameraman:ew.z.boolean(),is_fanfare:ew.z.boolean(),is_pompom:ew.z.boolean(),is_volunteer:ew.z.boolean(),sex:ew.z.enum(["masculine","feminine"],{required_error:"Veuillez s\xe9lectionner une option"}),sport:ew.z.object({id:ew.z.string({required_error:"Veuillez s\xe9lectionner un sport"}),team_id:ew.z.string().optional(),team_leader:ew.z.boolean(),license_number:ew.z.string().optional(),certificate:ew.z.string().optional(),substitute:ew.z.boolean().optional()}).optional(),products:ew.z.array(ew.z.object({product:ew.z.custom(),quantity:ew.z.number().min(1)}))}).superRefine((e,t)=>{e.is_athlete||e.is_cameraman||e.is_fanfare||e.is_pompom||e.is_volunteer||t.addIssue({path:["is_athlete"],code:ew.z.ZodIssueCode.custom,message:"Veuillez s\xe9lectionner au moins un r\xf4le"})}).superRefine((e,t)=>{[e.is_cameraman,e.is_fanfare,e.is_pompom].filter(Boolean).length>1&&t.addIssue({path:["is_athlete"],code:ew.z.ZodIssueCode.custom,message:"Vous ne pouvez pas s\xe9lectionner plusieurs r\xf4les non sportifs"})}).superRefine((e,t)=>{var s,a;e.is_athlete&&!e.sport&&t.addIssue({path:["sport"],code:ew.z.ZodIssueCode.custom,message:"Veuillez renseigner les informations sportives"}),e.is_athlete&&(null===(s=e.sport)||void 0===s?void 0:s.team_leader)&&!(null===(a=e.sport)||void 0===a?void 0:a.team_id)&&t.addIssue({path:["sport","team_id"],code:ew.z.ZodIssueCode.custom,message:"Veuillez renseigner le nom de l'\xe9quipe"})});var eM=s(55403),eU=s(29660),eO=()=>{let{edition:e}=(0,eU.n)(),{sportSchools:t}=(0,eM.m)(),{availableProducts:s}=ed(),{isTokenQueried:r,token:l}=(0,ei.a)(),{me:n,updateUser:o}=(0,V.a)(),{meCompetition:d,createCompetitionUser:c,updateCompetitionUser:u}=(0,ej.s)(),{meParticipant:m,createParticipant:p}=(0,eb.a)(),{userPurchases:h,createPurchase:x,deletePurchase:f}=e_({userId:null==n?void 0:n.id}),{payments:j}=(0,eE.T)(),g=(0,eB.useRouter)();r&&null===l&&g.replace("/login");let N=null==t?void 0:t.find(e=>e.school_id===(null==n?void 0:n.school_id));((null==e?void 0:e.inscription_enabled)===!1||(null==N?void 0:N.inscription_enabled)===!1)&&g.replace("/");let _=(0,eS.cI)({resolver:(0,ek.F)(eH),mode:"onChange",defaultValues:{is_athlete:!1,is_cameraman:!1,is_fanfare:!1,is_pompom:!1,is_volunteer:!1,sport:{team_leader:!1},products:(null==h?void 0:h.map(e=>{let t=null==s?void 0:s.find(t=>t.id===e.product_variant_id);if(t)return{product:t,quantity:e.quantity}}).filter(e=>void 0!==e))||[]}}),[y,w]=(0,i.useState)({currentStep:0,stepDone:0,headerTitle:"Inscription",headerSubtitle:"Informations",allHeaderSubtitles:["Informations","Participation","Panier","R\xe9capitulatif"],pageFields:{Informations:["phone","sex"],Participation:[],Sport:["sport.id","sport.team_id"],Panier:[],Récapitulatif:[]},onValidateCardActions:{Informations:(e,t)=>{},Participation:(e,t)=>{},Sport:(e,t)=>{},Panier:(e,t)=>{},Récapitulatif:(e,t)=>{}}});return(0,i.useEffect)(()=>{let e=[...y.allHeaderSubtitles];(null==d?void 0:d.is_athlete)&&"Sport"!==y.allHeaderSubtitles[2]?e.splice(2,0,"Sport"):"Sport"===y.allHeaderSubtitles[2]&&e.splice(2,1),w({...y,onValidateCardActions:{Informations:(e,t)=>{e.phone!==n.phone?o({phone:"+"+e.phone},t):t()},Participation:(e,t)=>{if(void 0!==d){t();return}c({sport_category:e.sex,is_athlete:e.is_athlete,is_cameraman:e.is_cameraman,is_fanfare:e.is_fanfare,is_pompom:e.is_pompom,is_volunteer:e.is_volunteer},t)},Sport:(e,t)=>{if(void 0!==m){t();return}p({license:e.sport.license_number,team_id:e.sport.team_id,substitute:e.sport.substitute},e.sport.id,t)},Panier:(e,t)=>{let a=e.products,i=s?s.filter(e=>!0===e.product.required).map(e=>e.id):[],r=a.map(e=>e.product.id);if(!i.every(e=>r.includes(e))){for(let e of i)if(!r.includes(e)){var l;let t=null==s?void 0:null===(l=s.find(t=>t.product_id===e))||void 0===l?void 0:l.product.name,i=a.findIndex(t=>t.product.id===e);_.setError(-1!==i?"products.".concat(i):"products",{type:"manual",message:"Le produit ".concat(t," est requis.")})}return}let n=a.filter(e=>!(null==h?void 0:h.some(t=>t.product_variant_id===e.product.id&&t.quantity===e.quantity))),o=null==h?void 0:h.filter(e=>!a.some(t=>t.product.id===e.product_variant_id));null==o||o.map(e=>{f(e.product_variant_id,()=>{})}),n.map(e=>{x({product_variant_id:e.product.id,quantity:e.quantity},()=>{})}),t()},Récapitulatif:(e,t)=>{}}})},[n,d,m,h,s]),(0,a.jsxs)(v.Hn,{children:[(0,a.jsx)(b,{state:y}),(0,a.jsxs)(v.kV,{children:[(0,a.jsx)("header",{className:"flex h-16 shrink-0 items-center gap-2",children:(0,a.jsxs)("div",{className:"flex items-center gap-2 px-4",children:[(0,a.jsx)(v.vP,{className:"-ml-1"}),(0,a.jsx)(eT.Z,{orientation:"vertical",className:"mr-2 data-[orientation=vertical]:h-4"}),(0,a.jsx)(eR.aG,{children:(0,a.jsxs)(eR.Jb,{children:[(0,a.jsx)(eR.gN,{className:"hidden md:block",children:(0,a.jsx)(eR.At,{href:"#",children:y.headerTitle})}),(0,a.jsx)(eR.bg,{className:"hidden md:block"}),(0,a.jsx)(eR.gN,{children:(0,a.jsx)(eR.AG,{children:y.headerSubtitle})})]})})]})}),(0,a.jsx)(eF,{setState:w,state:y,form:_})]})]})}},12770:function(e,t,s){"use strict";s.d(t,{Z:function(){return o}});var a=s(57437),i=s(49027),r=s(74291),l=s(12381),n=s(20423);let o=e=>{let{isOpened:t,setIsOpened:s,isLoading:o,title:d,description:c,validateLabel:u,callback:m,width:p="w-[100px]",customButton:h}=e;return(0,a.jsx)(r.Vq,{open:t,onOpenChange:s,children:(0,a.jsxs)(r.cZ,{className:"sm:max-w-[600px]",onClick:e=>e.stopPropagation(),children:[(0,a.jsx)(r.fK,{children:(0,a.jsx)(r.$N,{children:d})}),(0,a.jsx)(i.Be,{children:c}),(0,a.jsxs)("div",{className:"flex justify-end mt-2 space-x-4",children:[(0,a.jsx)(l.z,{variant:"outline",onClick:function(e){e.stopPropagation(),s(!1)},disabled:o,className:p,children:"Annuler"}),null!=h?h:(0,a.jsx)(n.f,{isLoading:o,onClick:function(e){e.stopPropagation(),m&&m()},className:p,children:u||"Valider"})]})]})})}},30021:function(e,t,s){"use strict";s.d(t,{AG:function(){return m},At:function(){return u},Jb:function(){return d},aG:function(){return o},bg:function(){return p},gN:function(){return c}});var a=s(57437),i=s(2265),r=s(37053),l=s(10407),n=(s(67782),s(94508));let o=i.forwardRef((e,t)=>{let{...s}=e;return(0,a.jsx)("nav",{ref:t,"aria-label":"breadcrumb",...s})});o.displayName="Breadcrumb";let d=i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,a.jsx)("ol",{ref:t,className:(0,n.cn)("flex flex-wrap items-center gap-1.5 break-words text-sm text-muted-foreground sm:gap-2.5",s),...i})});d.displayName="BreadcrumbList";let c=i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,a.jsx)("li",{ref:t,className:(0,n.cn)("inline-flex items-center gap-1.5",s),...i})});c.displayName="BreadcrumbItem";let u=i.forwardRef((e,t)=>{let{asChild:s,className:i,...l}=e,o=s?r.g7:"a";return(0,a.jsx)(o,{ref:t,className:(0,n.cn)("transition-colors hover:text-foreground",i),...l})});u.displayName="BreadcrumbLink";let m=i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,a.jsx)("span",{ref:t,role:"link","aria-disabled":"true","aria-current":"page",className:(0,n.cn)("font-normal text-foreground",s),...i})});m.displayName="BreadcrumbPage";let p=e=>{let{children:t,className:s,...i}=e;return(0,a.jsx)("li",{role:"presentation","aria-hidden":"true",className:(0,n.cn)("[&>svg]:size-3.5",s),...i,children:null!=t?t:(0,a.jsx)(l.Z,{})})};p.displayName="BreadcrumbSeparator"},25187:function(e,t,s){"use strict";s.d(t,{s:function(){return l}});var a=s(41494),i=s(28207),r=s(18752);let l=()=>{let{token:e,isTokenExpired:t}=(0,i.a)(),{data:s,isLoading:l,refetch:n}=(0,a.gvp)({headers:{Authorization:"Bearer ".concat(e)}},{enabled:!t(),retry:0}),{mutate:o,isPending:d}=(0,a.yRA)(),c=async(t,s)=>o({headers:{Authorization:"Bearer ".concat(e)},body:t},{onSettled:(e,t)=>{t.stack.body||t.stack.detail?(console.log(t),(0,r.Am)({title:"Erreur lors de l'ajout de l'utilisateur",description:t.stack.body||t.stack.detail,variant:"destructive"})):(n(),s(),(0,r.Am)({title:"Utilisateur ajout\xe9",description:"L'utilisateur a \xe9t\xe9 ajout\xe9 avec succ\xe8s."}))}}),{mutate:u,isPending:m}=(0,a.Wq6)(),p=async(t,s)=>u({headers:{Authorization:"Bearer ".concat(e)},body:t},{onSettled:(e,t)=>{t.stack.body||t.stack.detail?(console.log(t),(0,r.Am)({title:"Erreur lors de la modification de l'utilisateur",description:t.stack.body||t.stack.detail,variant:"destructive"})):(n(),s(),(0,r.Am)({title:"Utilisateur modifi\xe9",description:"L'utilisateur a \xe9t\xe9 modifi\xe9 avec succ\xe8s."}))}}),{mutate:h,isPending:x}=(0,a.bGf)(),{mutate:f,isPending:v}=(0,a.nE0)();return{meCompetition:s,isLoading:l,refetchMeCompetition:n,createCompetitionUser:c,updateCompetitionUser:p,isCreateLoading:d,validateParticipants:(t,s)=>h({headers:{Authorization:"Bearer ".concat(e)},pathParams:{userId:t}},{onSettled:(e,t)=>{t.stack.body||t.stack.detail?(console.log(t),(0,r.Am)({title:"Erreur lors de la mise \xe0 jour",description:t.stack.body||t.stack.detail,variant:"destructive"})):(n(),s(),(0,r.Am)({title:"Participant mis \xe0 jour",description:"Le participant a \xe9t\xe9 mis \xe0 jour avec succ\xe8s."}))}}),isValidateLoading:x,isInvalidateLoading:v,invalidateParticipants:(t,s)=>f({headers:{Authorization:"Bearer ".concat(e)},pathParams:{userId:t}},{onSettled:(e,t)=>{t.stack.body||t.stack.detail?(console.log(t),(0,r.Am)({title:"Erreur lors de la mise \xe0 jour",description:t.stack.body||t.stack.detail,variant:"destructive"})):(n(),s(),(0,r.Am)({title:"Participant mis \xe0 jour",description:"Le participant a \xe9t\xe9 mis \xe0 jour avec succ\xe8s."}))}})}}},67740:function(e,t,s){"use strict";s.d(t,{a:function(){return l}});var a=s(41494),i=s(28207),r=s(18752);let l=()=>{let{token:e,isTokenExpired:t}=(0,i.a)(),{data:s,refetch:l,error:n}=(0,a.jc5)({headers:{Authorization:"Bearer ".concat(e)}},{enabled:!t(),retry:0,queryHash:"getMeParticipant"}),{mutate:o,isPending:d}=(0,a.WEc)(),c=async(t,s,a)=>o({headers:{Authorization:"Bearer ".concat(e)},body:t,pathParams:{sportId:s}},{onSettled:(e,t)=>{t.stack.body||t.stack.detail?(console.log(t),(0,r.Am)({title:"Erreur lors de l'inscription",description:t.stack.body||t.stack.detail,variant:"destructive"})):(l(),a(),(0,r.Am)({title:"Demande d'inscription enregistr\xe9e",description:"Votre demande d'inscription a \xe9t\xe9 envoy\xe9e avec succ\xe8s."}))}});return{meParticipant:s,refetchMeParticipant:l,error:n,createParticipant:c,isCreateLoading:d}}},45362:function(e,t,s){"use strict";s.d(t,{E:function(){return l}});var a=s(41494),i=s(28207),r=s(18752);let l=e=>{let{schoolId:t,sportId:s}=e,{token:l,isTokenExpired:n}=(0,i.a)(),{data:o,isLoading:d,refetch:c}=(0,a.NNw)({headers:{Authorization:"Bearer ".concat(l)},pathParams:{schoolId:t,sportId:s}},{enabled:!n()&&!!t&&!!s,retry:0,queryHash:"getSchoolSportTeams"}),{mutate:u,isPending:m}=(0,a.UKJ)();return{teams:o,isLoading:d,refetchTeams:c,createSchoolSportTeam:(e,t)=>u({headers:{Authorization:"Bearer ".concat(l)},body:e},{onSettled:(e,s)=>{s.stack.body||s.stack.detail?(console.log(s),(0,r.Am)({title:"Erreur lors de l'ajout de l'\xe9quipe",description:s.stack.body||s.stack.detail,variant:"destructive"})):(c(),e&&t(e),(0,r.Am)({title:"\xc9quipe ajout\xe9e",description:"L'\xe9quipe a \xe9t\xe9 ajout\xe9e avec succ\xe8s."}))}}),isCreateLoading:m}}},55403:function(e,t,s){"use strict";s.d(t,{m:function(){return n}});var a=s(41494),i=s(25779),r=s(28207),l=s(18752);let n=()=>{let{token:e,isTokenExpired:t}=(0,r.a)(),{isAdmin:s}=(0,i.a)(),{data:n,refetch:o,error:d}=(0,a.Xs5)({headers:{Authorization:"Bearer ".concat(e)}},{enabled:s()&&!t(),retry:0,queryHash:"getSportSchools"}),{mutate:c,isPending:u}=(0,a.dlg)(),{mutate:m,isPending:p}=(0,a.NIq)(),{mutate:h,isPending:x}=(0,a.TI1)();return{sportSchools:n,createCompetitionSchool:(t,s)=>c({headers:{Authorization:"Bearer ".concat(e)},body:t},{onSettled:(e,t)=>{t.stack.body||t.stack.detail?(console.log(t),(0,l.Am)({title:"Erreur lors de la fusion des \xe9quipes",description:t.stack.body||t.stack.detail,variant:"destructive"})):(o(),s(),(0,l.Am)({title:"\xc9cole ajout\xe9e",description:"L'\xe9cole a \xe9t\xe9 ajout\xe9e avec succ\xe8s."}))}}),updateCompetitionSchool:(t,s,a)=>m({headers:{Authorization:"Bearer ".concat(e)},pathParams:{schoolId:t},body:s},{onSettled:(e,t)=>{t.stack.body||t.stack.detail?(console.log(t),(0,l.Am)({title:"Erreur lors de la mise \xe0 jour",description:t.stack.body||t.stack.detail,variant:"destructive"})):(o(),a(),(0,l.Am)({title:"\xc9cole mise \xe0 jour",description:"L'\xe9cole a \xe9t\xe9 mise \xe0 jour avec succ\xe8s."}))}}),deleteCompetitionSchool:(t,s)=>h({headers:{Authorization:"Bearer ".concat(e)},pathParams:{schoolId:t}},{onSettled:(e,t)=>{t.stack.body||t.stack.detail?(console.log(t),(0,l.Am)({title:"Erreur lors de la suppression",description:t.stack.body||t.stack.detail,variant:"destructive"})):(o(),s(),(0,l.Am)({title:"\xc9cole supprim\xe9e",description:"L'\xe9cole a \xe9t\xe9 supprim\xe9e avec succ\xe8s."}))}}),error:d,isLoading:u,isUpdateLoading:p,isDeleteLoading:x,refetchSchools:o}}},51945:function(e,t,s){"use strict";s.d(t,{T:function(){return r}});var a=s(41494),i=s(28207);let r=()=>{let{token:e,isTokenExpired:t,userId:s}=(0,i.a)(),{data:r,isLoading:l,error:n,refetch:o}=(0,a.MYc)({headers:{Authorization:"Bearer ".concat(e)},pathParams:{userId:s}},{enabled:!!s&&!t(),retry:0,queryHash:"getUserPayments"}),d=r&&r.length>0;return{payments:r,hasPaid:d,isLoading:l,error:n,refetchPayments:o}}},40785:function(e,t,s){"use strict";function a(e){return null==e?void 0:e.replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase())}s.d(t,{E:function(){return a}})}},function(e){e.O(0,[8826,8310,1414,9522,411,278,8068,9859,5763,558,5184,1312,4278,2435,8175,4430,917,2971,2117,1744],function(){return e(e.s=8076)}),_N_E=e.O()}]);