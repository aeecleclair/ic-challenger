(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6331],{90719:function(e,t,a){Promise.resolve().then(a.bind(a,85727))},42208:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(79205).Z)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},3577:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(79205).Z)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]])},83774:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(79205).Z)("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},44794:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(79205).Z)("package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]])},45675:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(79205).Z)("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]])},56096:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(79205).Z)("school",[["path",{d:"M14 22v-4a2 2 0 1 0-4 0v4",key:"hhkicm"}],["path",{d:"m18 10 3.447 1.724a1 1 0 0 1 .553.894V20a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-7.382a1 1 0 0 1 .553-.894L6 10",key:"1xqip1"}],["path",{d:"M18 5v17",key:"1sw6gf"}],["path",{d:"m4 6 7.106-3.553a2 2 0 0 1 1.788 0L20 6",key:"9d2mlk"}],["path",{d:"M6 5v17",key:"1xfsm0"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]])},27413:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(79205).Z)("trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]])},49474:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(79205).Z)("trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]])},85727:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return ep}});var s=a(57437),l=a(69174),n=a(12381),i=a(79820),r=a(40785);let o=e=>"d9772da7-1142-4002-8b86-b694b431dfed"===e.school_id?{label:"Centrale Lyon",variant:"outline",className:"border-orange-500 text-orange-700 bg-orange-50"}:e.from_lyon?{label:"\xc9cole Lyonnaise",variant:"default",className:""}:{label:"\xc9cole Externe",variant:"secondary",className:""};var c=a(83774),d=a(99388),u=a(42208),m=a(15868),h=a(18930),x=a(27648),p=e=>{let{school:t,onClick:a,onEdit:p,onDelete:j}=e,f=(0,r.E)(t.school.name),v=o(t);return(0,s.jsxs)(i.Zb,{className:"cursor-pointer hover:shadow-lg transition-all duration-200 hover:-translate-y-1 group",onClick:a,children:[(0,s.jsxs)(i.Ol,{className:"pb-3",children:[(0,s.jsx)(i.ll,{className:"text-lg font-semibold group-hover:text-primary transition-colors line-clamp-2",children:f}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-2 mt-2",children:[(0,s.jsxs)(l.C,{variant:v.variant,className:"gap-1 ".concat(v.className),children:[(0,s.jsx)(c.Z,{className:"h-3 w-3"}),v.label]}),!t.active&&(0,s.jsxs)(l.C,{variant:"destructive",className:"gap-1",children:[(0,s.jsx)(d.Z,{className:"h-3 w-3"}),"Inactive"]}),!1===t.inscription_enabled&&(0,s.jsxs)(l.C,{variant:"destructive",className:"gap-1",children:[(0,s.jsx)(d.Z,{className:"h-3 w-3"}),"Inscriptions ferm\xe9es"]})]}),t.ffsu_id&&(0,s.jsxs)("span",{className:"inline-flex items-center mt-2 text-sm text-muted-foreground",children:["FFSU ID: ",t.ffsu_id]})]}),(0,s.jsx)(i.aY,{className:"py-3",children:(0,s.jsx)("div",{className:"flex items-center justify-start",children:(0,s.jsxs)(x.default,{href:"/admin/schools?school_id=".concat(t.school_id),className:"flex items-center gap-2 text-sm text-muted-foreground hover:text-primary/80 transition-colors",onClick:e=>{e.stopPropagation()},children:[(0,s.jsx)(u.Z,{className:"h-4 w-4"}),"Voir les d\xe9tails"]})})}),(0,s.jsx)(i.eW,{className:"pt-3",children:(0,s.jsxs)("div",{className:"flex gap-2 w-full",children:[(0,s.jsxs)(n.z,{variant:"outline",size:"sm",className:"flex-1 gap-2",onClick:e=>{e.stopPropagation(),p&&p()},children:[(0,s.jsx)(m.Z,{className:"h-4 w-4"}),"Modifier"]}),(0,s.jsxs)(n.z,{variant:"destructive",size:"sm",className:"flex-1 gap-2",onClick:e=>{e.stopPropagation(),j&&j()},children:[(0,s.jsx)(h.Z,{className:"h-4 w-4"}),"Supprimer"]})]})})]})},j=a(74291),f=a(20423);function v(e){let{isOpen:t,onOpenChange:a,title:l,description:i,onConfirm:r,onCancel:o,isLoading:c}=e;return(0,s.jsx)(j.Vq,{open:t,onOpenChange:a,children:(0,s.jsxs)(j.cZ,{children:[(0,s.jsxs)(j.fK,{children:[(0,s.jsx)(j.$N,{children:l}),(0,s.jsx)(j.Be,{children:i})]}),(0,s.jsxs)(j.cN,{children:[(0,s.jsx)(n.z,{variant:"outline",onClick:()=>{o(),a(!1)},children:"Annuler"}),(0,s.jsx)(f.f,{onClick:()=>{r(),a(!1)},variant:"destructive",isLoading:c,children:"Supprimer"})]})]})})}var g=a(40279),N=a(55403),_=a(99376),q=a(41494),b=a(25779),C=a(28207),y=a(18752);let w=e=>{let{schoolId:t}=e,{token:a,isTokenExpired:s}=(0,C.a)(),{isAdmin:l}=(0,b.a)(),{data:n,refetch:i,error:r}=(0,q.qUh)({headers:{Authorization:"Bearer ".concat(a)},pathParams:{schoolId:t}},{enabled:l()&&!s()&&!!t,retry:0,queryHash:"getschoolsSportQuota"}),{mutate:o,isPending:c}=(0,q._Zy)(),{mutate:d,isPending:u}=(0,q.Rvs)(),{mutate:m,isPending:h}=(0,q.AVA)();return{schoolsSportQuota:n,error:r,refetchSchoolsSportQuota:i,isCreateLoading:c,createQuota:(e,s,l)=>o({headers:{Authorization:"Bearer ".concat(a)},pathParams:{schoolId:t,sportId:e},body:s},{onSettled:(e,t)=>{t.stack.body||t.stack.detail?(console.log(t),(0,y.Am)({title:"Erreur lors de l'ajout du quota",description:t.stack.body||t.stack.detail,variant:"destructive"})):(i(),l(),(0,y.Am)({title:"Quota ajout\xe9e",description:"Le quota a \xe9t\xe9 ajout\xe9 avec succ\xe8s."}))}}),isUpdateLoading:u,updateQuota:(e,s,l)=>d({headers:{Authorization:"Bearer ".concat(a)},pathParams:{schoolId:t,sportId:e},body:s},{onSettled:(e,t)=>{t.stack.body||t.stack.detail?(console.log(t),(0,y.Am)({title:"Erreur lors de la modification du quota",description:t.stack.body||t.stack.detail,variant:"destructive"})):(i(),l(),(0,y.Am)({title:"Quota modifi\xe9e",description:"Le quota a \xe9t\xe9 modifi\xe9e avec succ\xe8s."}))}}),isDeleteLoading:h,deleteQuota:(e,s)=>m({headers:{Authorization:"Bearer ".concat(a)},pathParams:{schoolId:t,sportId:e}},{onSettled:(e,t)=>{t.stack.body||t.stack.detail?(console.log(t),(0,y.Am)({title:"Erreur lors de la suppression du quota",description:t.stack.body||t.stack.detail,variant:"destructive"})):(i(),s(),(0,y.Am)({title:"Quota supprim\xe9e",description:"Le quota a \xe9t\xe9 supprim\xe9e avec succ\xe8s."}))}})}};var k=a(27875),S=a(2265),Z=a(71488),z=a(57665),L=a(29501),A=a(13590),I=a(91115),M=a(55092);let V=I.z.object({athlete_quota:(0,M.r)("Le quota doit \xeatre soit un entier, soit vide"),cameraman_quota:(0,M.r)("Le quota doit \xeatre soit un entier, soit vide"),pompom_quota:(0,M.r)("Le quota doit \xeatre soit un entier, soit vide"),fanfare_quota:(0,M.r)("Le quota doit \xeatre soit un entier, soit vide"),athlete_cameraman_quota:(0,M.r)("Le quota doit \xeatre soit un entier, soit vide"),athlete_pompom_quota:(0,M.r)("Le quota doit \xeatre soit un entier, soit vide"),athlete_fanfare_quota:(0,M.r)("Le quota doit \xeatre soit un entier, soit vide"),non_athlete_cameraman_quota:(0,M.r)("Le quota doit \xeatre soit un entier, soit vide"),non_athlete_pompom_quota:(0,M.r)("Le quota doit \xeatre soit un entier, soit vide"),non_athlete_fanfare_quota:(0,M.r)("Le quota doit \xeatre soit un entier, soit vide")});var Q=a(31030),F=a(80670),P=a(99397);function R(e){let{isOpen:t,onOpenChange:a,onSubmit:l,existingQuota:i,title:r,description:o,submitLabel:c,isLoading:d}=e,u=(0,L.cI)({resolver:(0,A.F)(V),defaultValues:{athlete_quota:(null==i?void 0:i.athlete_quota)||void 0,cameraman_quota:(null==i?void 0:i.cameraman_quota)||void 0,pompom_quota:(null==i?void 0:i.pompom_quota)||void 0,fanfare_quota:(null==i?void 0:i.fanfare_quota)||void 0,athlete_cameraman_quota:(null==i?void 0:i.athlete_cameraman_quota)||void 0,athlete_pompom_quota:(null==i?void 0:i.athlete_pompom_quota)||void 0,athlete_fanfare_quota:(null==i?void 0:i.athlete_fanfare_quota)||void 0,non_athlete_cameraman_quota:(null==i?void 0:i.non_athlete_cameraman_quota)||void 0,non_athlete_pompom_quota:(null==i?void 0:i.non_athlete_pompom_quota)||void 0,non_athlete_fanfare_quota:(null==i?void 0:i.non_athlete_fanfare_quota)||void 0}});return(0,S.useEffect)(()=>{i&&u.reset({athlete_quota:i.athlete_quota||void 0,cameraman_quota:i.cameraman_quota||void 0,pompom_quota:i.pompom_quota||void 0,fanfare_quota:i.fanfare_quota||void 0,athlete_cameraman_quota:i.athlete_cameraman_quota||void 0,athlete_pompom_quota:i.athlete_pompom_quota||void 0,athlete_fanfare_quota:i.athlete_fanfare_quota||void 0,non_athlete_cameraman_quota:i.non_athlete_cameraman_quota||void 0,non_athlete_pompom_quota:i.non_athlete_pompom_quota||void 0,non_athlete_fanfare_quota:i.non_athlete_fanfare_quota||void 0})},[i]),(0,s.jsxs)(j.Vq,{open:t,onOpenChange:a,children:[(0,s.jsx)(j.hg,{asChild:!0,children:(0,s.jsxs)(n.z,{className:"flex items-center gap-2",children:[(0,s.jsx)(P.Z,{className:"h-4 w-4"})," Ajouter un quota g\xe9n\xe9ral"]})}),(0,s.jsxs)(j.cZ,{children:[(0,s.jsxs)(j.fK,{children:[(0,s.jsx)(j.$N,{children:r}),(0,s.jsx)(j.Be,{children:o})]}),(0,s.jsx)(F.l0,{...u,children:(0,s.jsxs)("form",{onSubmit:u.handleSubmit(l),className:"space-y-4 py-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsx)(Q.L,{form:u,label:"Quota d'athl\xe8tes",id:"athlete_quota",input:e=>(0,s.jsx)(g.I,{type:"number",min:"0",value:e.value,onChange:e.onChange})}),(0,s.jsx)(Q.L,{form:u,label:"Quota de cameramen",id:"cameraman_quota",input:e=>(0,s.jsx)(g.I,{type:"number",min:"0",value:e.value,onChange:e.onChange})}),(0,s.jsx)(Q.L,{form:u,label:"Quota de pompom",id:"pompom_quota",input:e=>(0,s.jsx)(g.I,{type:"number",min:"0",value:e.value,onChange:e.onChange})}),(0,s.jsx)(Q.L,{form:u,label:"Quota de fanfare",id:"fanfare_quota",input:e=>(0,s.jsx)(g.I,{type:"number",min:"0",value:e.value,onChange:e.onChange})}),(0,s.jsx)(Q.L,{form:u,label:"Quota athl\xe8te + cameraman",id:"athlete_cameraman_quota",input:e=>(0,s.jsx)(g.I,{type:"number",min:"0",value:e.value,onChange:e.onChange})}),(0,s.jsx)(Q.L,{form:u,label:"Quota athl\xe8te + pompom",id:"athlete_pompom_quota",input:e=>(0,s.jsx)(g.I,{type:"number",min:"0",value:e.value,onChange:e.onChange})}),(0,s.jsx)(Q.L,{form:u,label:"Quota athl\xe8te + fanfare",id:"athlete_fanfare_quota",input:e=>(0,s.jsx)(g.I,{type:"number",min:"0",value:e.value,onChange:e.onChange})}),(0,s.jsx)(Q.L,{form:u,label:"Quota non-athl\xe8te + cameraman",id:"non_athlete_cameraman_quota",input:e=>(0,s.jsx)(g.I,{type:"number",min:"0",value:e.value,onChange:e.onChange})}),(0,s.jsx)(Q.L,{form:u,label:"Quota non-athl\xe8te + pompom",id:"non_athlete_pompom_quota",input:e=>(0,s.jsx)(g.I,{type:"number",min:"0",value:e.value,onChange:e.onChange})}),(0,s.jsx)(Q.L,{form:u,label:"Quota non-athl\xe8te + fanfare",id:"non_athlete_fanfare_quota",input:e=>(0,s.jsx)(g.I,{type:"number",min:"0",value:e.value,onChange:e.onChange})})]}),(0,s.jsxs)(j.cN,{children:[(0,s.jsx)(n.z,{type:"button",variant:"outline",onClick:()=>{a(!1),u.reset()},children:"Annuler"}),(0,s.jsx)(f.f,{type:"submit",isLoading:d,children:c})]})]})})]})]})}var O=a(41671),E=a(95805),D=a(32660),X=a(82727),B=a(15291);function G(e){var t;let{isOpen:a,onOpenChange:l,onSubmit:i,sports:r,selectedSport:o,setSelectedSport:c,existingQuota:d,title:u,description:m,submitLabel:h,isLoading:x}=e,p=(0,L.cI)({resolver:(0,A.F)(X.s),defaultValues:{participant_quota:void 0,team_quota:void 0}});return(0,S.useEffect)(()=>{d&&p.reset({participant_quota:d.participant_quota||void 0,team_quota:d.team_quota||void 0})},[d,p]),(0,s.jsxs)(j.Vq,{open:a,onOpenChange:l,children:[(0,s.jsx)(j.hg,{asChild:!0,children:(0,s.jsxs)(n.z,{className:"flex items-center gap-2",children:[(0,s.jsx)(P.Z,{className:"h-4 w-4"})," Ajouter un quota"]})}),(0,s.jsxs)(j.cZ,{children:[(0,s.jsxs)(j.fK,{children:[(0,s.jsx)(j.$N,{children:u}),(0,s.jsx)(j.Be,{children:m})]}),(0,s.jsx)(F.l0,{...p,children:(0,s.jsxs)("form",{onSubmit:p.handleSubmit(i),className:"space-y-4 py-4",children:[o?(0,s.jsxs)(F.xJ,{className:"w-full",children:[(0,s.jsx)(F.lX,{children:"Sport"}),(0,s.jsx)("div",{className:"p-2 border rounded-md bg-muted/50",children:(null==r?void 0:null===(t=r.find(e=>e.id===o))||void 0===t?void 0:t.name)||o})]}):(0,s.jsxs)(F.xJ,{className:"w-full",children:[(0,s.jsx)(F.lX,{children:"Sport"}),(0,s.jsxs)(B.Ph,{value:o||"",onValueChange:e=>c(e),children:[(0,s.jsx)(B.i4,{className:"w-full",children:(0,s.jsx)(B.ki,{placeholder:"S\xe9lectionnez un sport"})}),(0,s.jsx)(B.Bw,{children:null==r?void 0:r.map(e=>d?null:(0,s.jsx)(B.Ql,{value:e.id,children:e.name},e.id))})]})]}),(0,s.jsx)(Q.L,{form:p,label:"Quota de participants",id:"participant_quota",input:e=>(0,s.jsx)(g.I,{type:"number",min:"0",value:e.value,onChange:e.onChange})}),(0,s.jsx)(Q.L,{form:p,label:"Quota d'\xe9quipes",id:"team_quota",input:e=>(0,s.jsx)(g.I,{type:"number",min:"0",value:e.value,onChange:e.onChange})}),(0,s.jsxs)(j.cN,{children:[(0,s.jsx)(n.z,{type:"button",variant:"outline",onClick:()=>{l(!1),p.reset(),c(null)},children:"Annuler"}),(0,s.jsx)(f.f,{type:"submit",isLoading:x,children:h})]})]})})]})]})}var J=a(71594),H=a(24525),K=a(33804),W=a(32060),$=a(84834),T=a(28842),U=a(67782),Y=a(45675),ee=a(27413);function et(e){var t;let{data:a,onEditQuota:l,onDeleteQuota:i}=e,[r,o]=S.useState([]),[c,d]=S.useState([]),[u,m]=S.useState({}),h=[{accessorKey:"sportName",header:e=>{let{column:t}=e;return(0,s.jsxs)(n.z,{variant:"ghost",onClick:()=>t.toggleSorting("asc"===t.getIsSorted()),className:"flex items-center",children:["Sport",(0,s.jsx)(T.Z,{className:"ml-2 h-4 w-4"})]})},cell:e=>{let{row:t}=e;return(0,s.jsx)("div",{className:"font-medium",children:t.getValue("sportName")})},filterFn:"includesString"},{accessorKey:"participant_quota",header:e=>{let{column:t}=e;return(0,s.jsxs)(n.z,{variant:"ghost",onClick:()=>t.toggleSorting("asc"===t.getIsSorted()),className:"flex items-center justify-end w-full",children:["Quota de participants",(0,s.jsx)(T.Z,{className:"ml-2 h-4 w-4"})]})},cell:e=>{let{row:t}=e,a=t.getValue("participant_quota");return(0,s.jsx)("div",{className:"text-right",children:a||"-"})}},{accessorKey:"team_quota",header:e=>{let{column:t}=e;return(0,s.jsxs)(n.z,{variant:"ghost",onClick:()=>t.toggleSorting("asc"===t.getIsSorted()),className:"flex items-center justify-end w-full",children:["Quota d'\xe9quipes",(0,s.jsx)(T.Z,{className:"ml-2 h-4 w-4"})]})},cell:e=>{let{row:t}=e,a=t.getValue("team_quota");return(0,s.jsx)("div",{className:"text-right",children:a||"-"})}},{id:"actions",header:()=>(0,s.jsx)("div",{className:"text-right",children:"Actions"}),cell:e=>{let{row:t}=e,a=t.original;return(0,s.jsx)("div",{className:"flex justify-end",children:(0,s.jsx)(Z.pn,{children:(0,s.jsxs)(Z.u,{children:[(0,s.jsx)(Z.aJ,{asChild:!0,children:(0,s.jsxs)(W.h_,{children:[(0,s.jsx)(W.$F,{asChild:!0,children:(0,s.jsxs)(n.z,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:[(0,s.jsx)("span",{className:"sr-only",children:"Ouvrir menu"}),(0,s.jsx)(U.Z,{className:"h-4 w-4"})]})}),(0,s.jsxs)(W.AW,{align:"end",children:[(0,s.jsx)(W.Ju,{children:"Actions"}),(0,s.jsx)(W.VD,{}),(0,s.jsxs)(W.Xi,{onClick:()=>l(a.sport_id),className:"cursor-pointer",children:[(0,s.jsx)(Y.Z,{className:"mr-2 h-4 w-4"}),"Modifier"]}),(0,s.jsxs)(W.Xi,{onClick:()=>i(a.sport_id),className:"cursor-pointer text-destructive focus:text-destructive",children:[(0,s.jsx)(ee.Z,{className:"mr-2 h-4 w-4"}),"Supprimer"]})]})]})}),(0,s.jsx)(Z._v,{children:(0,s.jsx)("p",{children:"Actions"})})]})})})}}],x=(0,J.b7)({data:a,columns:h,state:{sorting:r,columnFilters:c,columnVisibility:u},onSortingChange:o,onColumnFiltersChange:d,onColumnVisibilityChange:m,getCoreRowModel:(0,H.sC)(),getFilteredRowModel:(0,H.vL)(),getPaginationRowModel:(0,H.G_)(),getSortedRowModel:(0,H.tj)()});return(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"flex items-center py-4",children:(0,s.jsx)(g.I,{placeholder:"Filtrer par sport...",value:(null===(t=x.getColumn("sportName"))||void 0===t?void 0:t.getFilterValue())||"",onChange:e=>{var t;return null===(t=x.getColumn("sportName"))||void 0===t?void 0:t.setFilterValue(e.target.value)},className:"max-w-sm"})}),(0,s.jsx)("div",{className:"rounded-md border",children:(0,s.jsxs)(K.iA,{children:[(0,s.jsx)(K.xD,{children:x.getHeaderGroups().map(e=>(0,s.jsx)(K.SC,{children:e.headers.map(e=>(0,s.jsx)(K.ss,{className:"actions"===e.id?"text-right":"",children:e.isPlaceholder?null:(0,J.ie)(e.column.columnDef.header,e.getContext())},e.id))},e.id))}),(0,s.jsx)(K.RM,{children:x.getRowModel().rows.length>0?x.getRowModel().rows.sort((e,t)=>e.getValue("sportName").localeCompare(t.getValue("sportName"))).map(e=>(0,s.jsx)(K.SC,{children:e.getVisibleCells().map(e=>(0,s.jsx)(K.pj,{className:"actions"===e.column.id?"text-right":"",children:(0,J.ie)(e.column.columnDef.cell,e.getContext())},e.id))},e.id)):(0,s.jsx)(K.SC,{children:(0,s.jsx)(K.pj,{colSpan:h.length,className:"text-center py-4 text-muted-foreground",children:"Aucun quota d\xe9fini pour cette \xe9cole"})})})]})}),(0,s.jsx)("div",{className:"mt-4",children:(0,s.jsx)($.k,{table:x,selectedLabel:"quota(s) s\xe9lectionn\xe9(s)",itemsPerPageLabel:"Quotas par page",showSelectedCount:!1})})]})}var ea=a(49474);let es=e=>{let{school:t,setIsDeleteDialogOpen:a}=e,{schoolsSportQuota:l,isCreateLoading:r,createQuota:o,isUpdateLoading:c,updateQuota:d,isDeleteLoading:u,deleteQuota:m}=w({schoolId:t.school_id}),{sports:h}=(0,k.V)(),[x,p]=(0,S.useState)(!1),[j,f]=(0,S.useState)(null),[v,g]=(0,S.useState)(null),N=null==l?void 0:l.find(e=>e.sport_id===j),_=e=>{var t;return(null==h?void 0:null===(t=h.find(t=>t.id===e))||void 0===t?void 0:t.name)||e};return(0,s.jsxs)(i.Zb,{children:[(0,s.jsx)(i.Ol,{children:(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)(i.ll,{className:"flex items-center gap-2",children:[(0,s.jsx)(ea.Z,{className:"h-5 w-5"}),"Quotas par sport"]}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:"G\xe9rez les quotas de participants et d'\xe9quipes pour chaque sport"})]}),(0,s.jsx)(G,{isOpen:x,onOpenChange:p,onSubmit:e=>{if(!j)return;let t={participant_quota:e.participant_quota,team_quota:e.team_quota};N?d(j,t,()=>{p(!1),f(null)}):o(j,t,()=>{p(!1),f(null)})},sports:h,selectedSport:j,setSelectedSport:f,existingQuota:N,title:j&&(null==l?void 0:l.find(e=>e.sport_id===j))?"Modifier le quota":"Ajouter un quota",description:"D\xe9finissez le nombre de participants et d'\xe9quipes autoris\xe9s pour ce sport.",submitLabel:j&&(null==l?void 0:l.find(e=>e.sport_id===j))?"Modifier":"Ajouter",isLoading:r||c})]})}),(0,s.jsx)(i.aY,{children:l&&l.length>0?(0,s.jsx)(et,{data:l.map(e=>({sport_id:e.sport_id,sportName:_(e.sport_id),participant_quota:e.participant_quota||0,team_quota:e.team_quota||0,school_id:e.school_id})),onEditQuota:e=>{(null==l?void 0:l.find(t=>t.sport_id===e))&&(f(e),p(!0))},onDeleteQuota:e=>{g(e),a(!0)}}):(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-center border-2 border-dashed border-muted rounded-lg",children:[(0,s.jsx)(ea.Z,{className:"h-12 w-12 text-muted-foreground mb-4"}),(0,s.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Aucun quota configur\xe9"}),(0,s.jsx)("p",{className:"text-muted-foreground mb-4",children:"Commencez par ajouter des quotas pour les sports de cette \xe9cole"}),(0,s.jsxs)(n.z,{onClick:()=>p(!0),className:"gap-2",children:[(0,s.jsx)(P.Z,{className:"h-4 w-4"}),"Ajouter un quota"]})]})})]})};var el=a(3558),en=a(56229);let ei=I.z.object({quota:(0,M.r)("Le quota doit \xeatre soit un entier, soit vide")});function er(e){var t;let{isOpen:a,onOpenChange:l,onSubmit:i,products:r,selectedProduct:o,setSelectedProduct:c,existingQuota:d,title:u,description:m,submitLabel:h,isLoading:x}=e,p=(0,L.cI)({resolver:(0,A.F)(ei),defaultValues:{quota:void 0}});return(0,S.useEffect)(()=>{d&&p.reset({quota:d.quota||void 0})},[d,p]),(0,s.jsxs)(j.Vq,{open:a,onOpenChange:l,children:[(0,s.jsx)(j.hg,{asChild:!0,children:(0,s.jsxs)(n.z,{className:"flex items-center gap-2",children:[(0,s.jsx)(P.Z,{className:"h-4 w-4"})," Ajouter un quota"]})}),(0,s.jsxs)(j.cZ,{children:[(0,s.jsxs)(j.fK,{children:[(0,s.jsx)(j.$N,{children:u}),(0,s.jsx)(j.Be,{children:m})]}),(0,s.jsx)(F.l0,{...p,children:(0,s.jsxs)("form",{onSubmit:p.handleSubmit(i),className:"space-y-4 py-4",children:[o?(0,s.jsxs)(F.xJ,{className:"w-full",children:[(0,s.jsx)(F.lX,{children:"Product"}),(0,s.jsx)("div",{className:"p-2 border rounded-md bg-muted/50",children:(null==r?void 0:null===(t=r.find(e=>e.id===o))||void 0===t?void 0:t.name)||o})]}):(0,s.jsxs)(F.xJ,{className:"w-full",children:[(0,s.jsx)(F.lX,{children:"Produit"}),(0,s.jsxs)(B.Ph,{value:o||"",onValueChange:e=>c(e),children:[(0,s.jsx)(B.i4,{className:"w-full",children:(0,s.jsx)(B.ki,{placeholder:"S\xe9lectionnez un product"})}),(0,s.jsx)(B.Bw,{children:null==r?void 0:r.map(e=>d?null:(0,s.jsx)(B.Ql,{value:e.id,children:e.name},e.id))})]})]}),(0,s.jsx)(Q.L,{form:p,label:"Quota",id:"quota",input:e=>(0,s.jsx)(g.I,{type:"number",min:"0",value:e.value,onChange:e.onChange})}),(0,s.jsxs)(j.cN,{children:[(0,s.jsx)(n.z,{type:"button",variant:"outline",onClick:()=>{l(!1),p.reset(),c(null)},children:"Annuler"}),(0,s.jsx)(f.f,{type:"submit",isLoading:x,children:h})]})]})})]})]})}function eo(e){var t;let{data:a,onEditQuota:l}=e,[i,r]=S.useState([]),[o,c]=S.useState([]),[d,u]=S.useState({}),m=[{accessorKey:"productName",header:e=>{let{column:t}=e;return(0,s.jsxs)(n.z,{variant:"ghost",onClick:()=>t.toggleSorting("asc"===t.getIsSorted()),className:"flex items-center",children:["Product",(0,s.jsx)(T.Z,{className:"ml-2 h-4 w-4"})]})},cell:e=>{let{row:t}=e;return(0,s.jsx)("div",{className:"font-medium",children:t.getValue("productName")})},filterFn:"includesString"},{accessorKey:"quota",header:e=>{let{column:t}=e;return(0,s.jsxs)(n.z,{variant:"ghost",onClick:()=>t.toggleSorting("asc"===t.getIsSorted()),className:"flex items-center justify-end w-full",children:["Quota",(0,s.jsx)(T.Z,{className:"ml-2 h-4 w-4"})]})},cell:e=>{let{row:t}=e,a=t.getValue("quota");return(0,s.jsx)("div",{className:"text-right",children:a||"-"})}},{id:"actions",header:()=>(0,s.jsx)("div",{className:"text-right",children:"Actions"}),cell:e=>{let{row:t}=e,a=t.original;return(0,s.jsx)("div",{className:"flex justify-end",children:(0,s.jsx)(Z.pn,{children:(0,s.jsxs)(Z.u,{children:[(0,s.jsx)(Z.aJ,{asChild:!0,children:(0,s.jsxs)(W.h_,{children:[(0,s.jsx)(W.$F,{asChild:!0,children:(0,s.jsxs)(n.z,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:[(0,s.jsx)("span",{className:"sr-only",children:"Ouvrir menu"}),(0,s.jsx)(U.Z,{className:"h-4 w-4"})]})}),(0,s.jsxs)(W.AW,{align:"end",children:[(0,s.jsx)(W.Ju,{children:"Actions"}),(0,s.jsx)(W.VD,{}),(0,s.jsxs)(W.Xi,{onClick:()=>l(a.product_id),className:"cursor-pointer",children:[(0,s.jsx)(Y.Z,{className:"mr-2 h-4 w-4"}),"Modifier"]})]})]})}),(0,s.jsx)(Z._v,{children:(0,s.jsx)("p",{children:"Actions"})})]})})})}}],h=(0,J.b7)({data:a,columns:m,state:{sorting:i,columnFilters:o,columnVisibility:d},onSortingChange:r,onColumnFiltersChange:c,onColumnVisibilityChange:u,getCoreRowModel:(0,H.sC)(),getFilteredRowModel:(0,H.vL)(),getPaginationRowModel:(0,H.G_)(),getSortedRowModel:(0,H.tj)()});return(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"flex items-center py-4",children:(0,s.jsx)(g.I,{placeholder:"Filtrer par product...",value:(null===(t=h.getColumn("productName"))||void 0===t?void 0:t.getFilterValue())||"",onChange:e=>{var t;return null===(t=h.getColumn("productName"))||void 0===t?void 0:t.setFilterValue(e.target.value)},className:"max-w-sm"})}),(0,s.jsx)("div",{className:"rounded-md border",children:(0,s.jsxs)(K.iA,{children:[(0,s.jsx)(K.xD,{children:h.getHeaderGroups().map(e=>(0,s.jsx)(K.SC,{children:e.headers.map(e=>(0,s.jsx)(K.ss,{className:"actions"===e.id?"text-right":"",children:e.isPlaceholder?null:(0,J.ie)(e.column.columnDef.header,e.getContext())},e.id))},e.id))}),(0,s.jsx)(K.RM,{children:h.getRowModel().rows.length>0?h.getRowModel().rows.sort((e,t)=>e.getValue("productName").localeCompare(t.getValue("productName"))).map(e=>(0,s.jsx)(K.SC,{children:e.getVisibleCells().map(e=>(0,s.jsx)(K.pj,{className:"actions"===e.column.id?"text-right":"",children:(0,J.ie)(e.column.columnDef.cell,e.getContext())},e.id))},e.id)):(0,s.jsx)(K.SC,{children:(0,s.jsx)(K.pj,{colSpan:m.length,className:"text-center py-4 text-muted-foreground",children:"Aucun quota d\xe9fini pour cette \xe9cole"})})})]})}),(0,s.jsx)("div",{className:"mt-4",children:(0,s.jsx)($.k,{table:h,selectedLabel:"quota(s) s\xe9lectionn\xe9(s)",itemsPerPageLabel:"Quotas par page",showSelectedCount:!1})})]})}var ec=a(44794);let ed=e=>{let{school:t}=e,{schoolsProductQuota:a,isCreateLoading:l,createQuota:r,isUpdateLoading:o,updateQuota:c}=(0,el.a)({schoolId:t.school_id}),{products:d}=(0,en.r)(),[u,m]=(0,S.useState)(!1),[h,x]=(0,S.useState)(null),p=null==a?void 0:a.find(e=>e.product_id===h),j=e=>{var t;return(null==d?void 0:null===(t=d.find(t=>t.id===e))||void 0===t?void 0:t.name)||e};return(0,s.jsxs)(i.Zb,{children:[(0,s.jsx)(i.Ol,{children:(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)(i.ll,{className:"flex items-center gap-2",children:[(0,s.jsx)(ec.Z,{className:"h-5 w-5 text-primary"}),"Quotas par produit"]}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:"G\xe9rez les quotas de participants et d'\xe9quipes pour chaque produit"})]}),(0,s.jsx)(er,{isOpen:u,onOpenChange:m,onSubmit:e=>{if(!h)return;let t={product_id:h,quota:e.quota||0};p?c(h,t,()=>{m(!1),x(null)}):r(t,()=>{m(!1),x(null)})},products:d,selectedProduct:h,setSelectedProduct:x,existingQuota:p,title:h&&(null==a?void 0:a.find(e=>e.product_id===h))?"Modifier le quota":"Ajouter un quota",description:"D\xe9finissez le nombre de participants et d'\xe9quipes autoris\xe9s pour ce produit.",submitLabel:h&&(null==a?void 0:a.find(e=>e.product_id===h))?"Modifier":"Ajouter",isLoading:l||o})]})}),(0,s.jsx)(i.aY,{children:a&&a.length>0?(0,s.jsx)(eo,{data:a.map(e=>({product_id:e.product_id,productName:j(e.product_id),quota:e.quota||0,school_id:e.school_id})),onEditQuota:e=>{(null==a?void 0:a.find(t=>t.product_id===e))&&(x(e),m(!0))}}):(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-center border-2 border-dashed border-muted rounded-lg",children:[(0,s.jsx)(ec.Z,{className:"h-12 w-12 text-muted-foreground mb-4"}),(0,s.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Aucun quota configur\xe9"}),(0,s.jsx)("p",{className:"text-muted-foreground mb-4",children:"Commencez par ajouter des quotas pour les produits de cette \xe9cole"}),(0,s.jsxs)(n.z,{onClick:()=>m(!0),className:"gap-2",children:[(0,s.jsx)(P.Z,{className:"h-4 w-4"}),"Ajouter un quota"]})]})})]})};var eu=e=>{var t;let{school:a,onEdit:i,onDelete:u}=e,{createQuota:x,updateQuota:p,isCreateLoading:j,isUpdateLoading:f,schoolsGeneralQuota:g}=(0,z.T)({schoolId:a.school_id}),[N,_]=(0,S.useState)(!1),{deleteQuota:q,isDeleteLoading:b}=w({schoolId:a.school_id}),{sports:C}=(0,k.V)(),y=o(a),[L,A]=(0,S.useState)(!1),[I,M]=(0,S.useState)(null);return(0,s.jsx)(Z.pn,{children:(0,s.jsxs)("div",{className:"flex w-full flex-col space-y-6",children:[(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:(0,r.E)(a.school.name)}),g&&(0,s.jsxs)(Z.u,{children:[(0,s.jsx)(Z.aJ,{asChild:!0,children:(0,s.jsx)(n.z,{variant:"ghost",size:"sm",className:"px-2 py-1 text-xs",children:"Quota g\xe9n\xe9ral"})}),(0,s.jsx)(Z._v,{className:"max-w-xs",children:(0,s.jsx)("div",{className:"space-y-1",children:Object.entries(g).map(e=>{let[t,a]=e;return(0,s.jsxs)("div",{className:"flex justify-between gap-2",children:[(0,s.jsx)("span",{className:"font-medium text-xs text-muted-foreground",children:t.replace(/_/g," ")}),(0,s.jsx)("span",{className:"text-xs",children:null!=a?a:0})]},t)})})})]})]}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-2 mt-2",children:[(0,s.jsxs)(l.C,{variant:y.variant,className:"gap-1 ".concat(y.className),children:[(0,s.jsx)(c.Z,{className:"h-3 w-3"}),y.label]}),(0,s.jsxs)(l.C,{variant:a.active?"default":"destructive",className:"gap-1",children:[a.active?(0,s.jsx)(O.Z,{className:"h-3 w-3"}):(0,s.jsx)(d.Z,{className:"h-3 w-3"}),a.active?"Active":"Inactive"]}),(0,s.jsxs)(l.C,{variant:a.inscription_enabled?"default":"secondary",className:"gap-1",children:[(0,s.jsx)(E.Z,{className:"h-3 w-3"}),"Inscriptions"," ",a.inscription_enabled?"ouvertes":"ferm\xe9es"]})]}),a.ffsu_id&&(0,s.jsxs)("span",{className:"inline-flex items-center mt-2",children:["FFSU ID: ",a.ffsu_id]})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsxs)(n.z,{variant:"outline",onClick:()=>window.history.back(),className:"gap-2",children:[(0,s.jsx)(D.Z,{className:"h-4 w-4"}),"Retour"]}),(0,s.jsx)(R,{isOpen:N,onOpenChange:_,onSubmit:e=>{g?p(e,()=>{_(!1)}):x(e,()=>{_(!1)})},existingQuota:g,title:g?"Modifier le quota g\xe9n\xe9ral":"Ajouter un quota g\xe9n\xe9ral",description:"D\xe9finissez les quotas g\xe9n\xe9raux pour cette \xe9cole.",submitLabel:g?"Modifier":"Valider",isLoading:g?f:j}),i&&(0,s.jsxs)(n.z,{variant:"outline",onClick:i,className:"gap-2",children:[(0,s.jsx)(m.Z,{className:"h-4 w-4"}),"Modifier"]}),u&&(0,s.jsxs)(n.z,{variant:"destructive",onClick:u,className:"gap-2 hover:bg-destructive hover:text-destructive-foreground",children:[(0,s.jsx)(h.Z,{className:"h-4 w-4"}),"Supprimer"]})]})]}),(0,s.jsx)(es,{school:a,setIsDeleteDialogOpen:A}),(0,s.jsx)(ed,{school:a}),(0,s.jsx)(v,{isOpen:L,onOpenChange:A,title:"Supprimer le quota",description:"\xcates-vous s\xfbr de vouloir supprimer le quota pour ".concat(I?(null==C?void 0:null===(t=C.find(e=>e.id===I))||void 0===t?void 0:t.name)||I:""," ? Cette action est irr\xe9versible."),onConfirm:()=>{I&&q(I,()=>{M(null)})},onCancel:()=>M(null),isLoading:b})]})})},em=a(56096),eh=a(73247),ex=a(3577),ep=()=>{let e=(0,_.useRouter)(),{sportSchools:t,deleteCompetitionSchool:a,isDeleteLoading:i}=(0,N.m)(),[r,o]=(0,S.useState)(""),[c,d]=(0,S.useState)("all"),[u,m]=(0,S.useState)("all"),[h,j]=(0,S.useState)(null),[f,q]=(0,S.useState)(!1),b=(0,_.useSearchParams)().get("school_id"),C=null==t?void 0:t.find(e=>e.school_id===b),y=(0,S.useMemo)(()=>t?t.filter(e=>{let t=e.school.name.toLowerCase().includes(r.toLowerCase()),a="all"===c||"active"===c&&e.active||"inactive"===c&&!e.active,s="all"===u||"lyon"===u&&e.from_lyon||"external"===u&&!e.from_lyon;return t&&a&&s}):[],[t,r,c,u]),w=(0,S.useMemo)(()=>t?{total:t.length,active:t.filter(e=>e.active).length,lyon:t.filter(e=>e.from_lyon).length,external:t.filter(e=>!e.from_lyon).length}:{total:0,active:0,lyon:0,external:0},[t]);return(0,s.jsxs)("div",{className:"flex w-full flex-col",children:[C?(0,s.jsx)(eu,{school:C,onEdit:()=>{e.push("/admin/schools/edit?school_id=".concat(C.school_id))},onDelete:()=>{j(C.school_id),q(!0)}}):(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"\xc9coles"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"G\xe9rez les \xe9coles participantes \xe0 la comp\xe9tition"})]}),(0,s.jsx)(x.default,{href:"/admin/schools/create",children:(0,s.jsxs)(n.z,{size:"lg",className:"gap-2",children:[(0,s.jsx)(P.Z,{className:"h-4 w-4"}),"Ajouter une \xe9cole"]})})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,s.jsxs)("div",{className:"bg-card border rounded-lg p-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(em.Z,{className:"h-4 w-4 text-muted-foreground"}),(0,s.jsx)("span",{className:"text-sm font-medium text-muted-foreground",children:"Total"})]}),(0,s.jsx)("div",{className:"text-2xl font-bold",children:w.total})]}),(0,s.jsxs)("div",{className:"bg-card border rounded-lg p-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(E.Z,{className:"h-4 w-4 "}),(0,s.jsx)("span",{className:"text-sm font-medium text-muted-foreground",children:"Actives"})]}),(0,s.jsx)("div",{className:"text-2xl font-bold ",children:w.active})]}),(0,s.jsxs)("div",{className:"bg-card border rounded-lg p-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"h-4 w-4 rounded bg-gray-400"}),(0,s.jsx)("span",{className:"text-sm font-medium text-muted-foreground",children:"Lyonnaises"})]}),(0,s.jsx)("div",{className:"text-2xl font-bold ",children:w.lyon})]}),(0,s.jsxs)("div",{className:"bg-card border rounded-lg p-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"h-4 w-4 rounded bg-gray-300"}),(0,s.jsx)("span",{className:"text-sm font-medium text-muted-foreground",children:"Externes"})]}),(0,s.jsx)("div",{className:"text-2xl font-bold ",children:w.external})]})]}),(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,s.jsxs)("div",{className:"relative flex-1",children:[(0,s.jsx)(eh.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,s.jsx)(g.I,{placeholder:"Rechercher une \xe9cole...",value:r,onChange:e=>o(e.target.value),className:"pl-10"})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsxs)(W.h_,{children:[(0,s.jsx)(W.$F,{asChild:!0,children:(0,s.jsxs)(n.z,{variant:"outline",className:"gap-2",children:[(0,s.jsx)(ex.Z,{className:"h-4 w-4"}),"Statut","all"!==c&&(0,s.jsx)(l.C,{variant:"secondary",className:"ml-1",children:"active"===c?"Actives":"Inactives"})]})}),(0,s.jsxs)(W.AW,{children:[(0,s.jsx)(W.Xi,{onClick:()=>d("all"),children:"Toutes"}),(0,s.jsx)(W.Xi,{onClick:()=>d("active"),children:"Actives uniquement"}),(0,s.jsx)(W.Xi,{onClick:()=>d("inactive"),children:"Inactives uniquement"})]})]}),(0,s.jsxs)(W.h_,{children:[(0,s.jsx)(W.$F,{asChild:!0,children:(0,s.jsxs)(n.z,{variant:"outline",className:"gap-2",children:[(0,s.jsx)(ex.Z,{className:"h-4 w-4"}),"Origine","all"!==u&&(0,s.jsx)(l.C,{variant:"secondary",className:"ml-1",children:"lyon"===u?"Lyon":"Externes"})]})}),(0,s.jsxs)(W.AW,{children:[(0,s.jsx)(W.Xi,{onClick:()=>m("all"),children:"Toutes"}),(0,s.jsx)(W.Xi,{onClick:()=>m("lyon"),children:"Lyonnaises uniquement"}),(0,s.jsx)(W.Xi,{onClick:()=>m("external"),children:"Externes uniquement"})]})]})]})]}),r||"all"!==c||"all"!==u?(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,s.jsxs)("span",{children:[y.length," \xe9cole(s) trouv\xe9e(s)",r&&' pour "'.concat(r,'"')]}),("all"!==c||"all"!==u)&&(0,s.jsx)(n.z,{variant:"ghost",size:"sm",onClick:()=>{o(""),d("all"),m("all")},className:"h-auto p-1 text-xs",children:"Effacer les filtres"})]}):null,y&&y.length>0?(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:y.sort((e,t)=>e.school.name.localeCompare(t.school.name)).map(t=>(0,s.jsx)(p,{school:t,onClick:()=>{e.push("/admin/schools?school_id=".concat(t.school_id))},onEdit:()=>{e.push("/admin/schools/edit?school_id=".concat(t.school_id))},onDelete:()=>{j(t.school_id),q(!0)}},t.school_id))}):(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[(0,s.jsx)(em.Z,{className:"h-12 w-12 text-muted-foreground mb-4"}),(0,s.jsx)("h3",{className:"text-lg font-semibold mb-2",children:r||"all"!==c||"all"!==u?"Aucune \xe9cole trouv\xe9e":"Aucune \xe9cole enregistr\xe9e"}),(0,s.jsx)("p",{className:"text-muted-foreground mb-4",children:r||"all"!==c||"all"!==u?"Essayez de modifier vos crit\xe8res de recherche":"Commencez par ajouter votre premi\xe8re \xe9cole"}),!r&&"all"===c&&"all"===u&&(0,s.jsx)(x.default,{href:"/admin/schools/create",children:(0,s.jsxs)(n.z,{className:"gap-2",children:[(0,s.jsx)(P.Z,{className:"h-4 w-4"}),"Ajouter une \xe9cole"]})})]})]}),(0,s.jsx)(v,{isOpen:f,onOpenChange:q,title:"Supprimer l'\xe9cole",description:"\xcates-vous s\xfbr de vouloir supprimer cette \xe9cole ? Cette action est irr\xe9versible et supprimera \xe9galement tous les quotas associ\xe9s.",onConfirm:()=>{h&&a(h,()=>{j(null),q(!1)})},onCancel:()=>{j(null),q(!1)},isLoading:i})]})}},20423:function(e,t,a){"use strict";a.d(t,{f:function(){return i}});var s=a(57437),l=a(12381),n=a(20653);let i=e=>{let{isLoading:t,type:a,onClick:i,children:r,className:o,disabled:c,variant:d="default",size:u="default"}=e;return(0,s.jsx)(l.z,{variant:d,type:a,onClick:i,className:o,disabled:t||c,size:u,children:t?(0,s.jsx)(n.BGW,{className:"h-4 w-4 animate-spin"}):r})}},31030:function(e,t,a){"use strict";a.d(t,{L:function(){return n}});var s=a(57437),l=a(80670);let n=e=>{let{form:t,label:a,id:n,input:i}=e;return(0,s.jsx)(l.Wi,{control:t.control,name:n,render:e=>{let{field:t}=e;return(0,s.jsx)(l.xJ,{className:"w-full",children:(0,s.jsxs)("div",{className:"grid gap-2",children:[null!=a?a:(0,s.jsx)(l.lX,{children:a}),(0,s.jsx)(l.NI,{children:i(t)}),(0,s.jsx)(l.zG,{})]})})}})}},80670:function(e,t,a){"use strict";a.d(t,{NI:function(){return j},Wi:function(){return u},l0:function(){return c},lX:function(){return p},pf:function(){return f},xJ:function(){return x},zG:function(){return v}});var s=a(57437),l=a(2265),n=a(37053),i=a(29501),r=a(94508),o=a(75060);let c=i.RV,d=l.createContext({}),u=e=>{let{...t}=e;return(0,s.jsx)(d.Provider,{value:{name:t.name},children:(0,s.jsx)(i.Qr,{...t})})},m=()=>{let e=l.useContext(d),t=l.useContext(h),{getFieldState:a,formState:s}=(0,i.Gc)(),n=a(e.name,s);if(!e)throw Error("useFormField should be used within <FormField>");let{id:r}=t;return{id:r,name:e.name,formItemId:"".concat(r,"-form-item"),formDescriptionId:"".concat(r,"-form-item-description"),formMessageId:"".concat(r,"-form-item-message"),...n}},h=l.createContext({}),x=l.forwardRef((e,t)=>{let{className:a,...n}=e,i=l.useId();return(0,s.jsx)(h.Provider,{value:{id:i},children:(0,s.jsx)("div",{ref:t,className:(0,r.cn)("space-y-2",a),...n})})});x.displayName="FormItem";let p=l.forwardRef((e,t)=>{let{className:a,...l}=e,{error:n,formItemId:i}=m();return(0,s.jsx)(o._,{ref:t,className:(0,r.cn)(n&&"text-destructive",a),htmlFor:i,...l})});p.displayName="FormLabel";let j=l.forwardRef((e,t)=>{let{...a}=e,{error:l,formItemId:i,formDescriptionId:r,formMessageId:o}=m();return(0,s.jsx)(n.g7,{ref:t,id:i,"aria-describedby":l?"".concat(r," ").concat(o):"".concat(r),"aria-invalid":!!l,...a})});j.displayName="FormControl";let f=l.forwardRef((e,t)=>{let{className:a,...l}=e,{formDescriptionId:n}=m();return(0,s.jsx)("p",{ref:t,id:n,className:(0,r.cn)("text-sm text-muted-foreground",a),...l})});f.displayName="FormDescription";let v=l.forwardRef((e,t)=>{let{className:a,children:l,...n}=e,{error:i,formMessageId:o}=m(),c=i?String(null==i?void 0:i.message):l;return c?(0,s.jsx)("p",{ref:t,id:o,className:(0,r.cn)("text-sm font-medium text-destructive",a),...n,children:c}):null});v.displayName="FormMessage"},75060:function(e,t,a){"use strict";a.d(t,{_:function(){return c}});var s=a(57437),l=a(2265),n=a(6394),i=a(90535),r=a(94508);let o=(0,i.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)(n.f,{ref:t,className:(0,r.cn)(o(),a),...l})});c.displayName=n.f.displayName},82727:function(e,t,a){"use strict";a.d(t,{s:function(){return n}});var s=a(91115),l=a(55092);let n=s.z.object({participant_quota:(0,l.r)("Le quota doit \xeatre soit un entier, soit vide"),team_quota:(0,l.r)("Le quota doit \xeatre soit un entier, soit vide")})},55092:function(e,t,a){"use strict";a.d(t,{r:function(){return l}});var s=a(91115);let l=e=>s.z.string().optional().refine(e=>{if(void 0===e)return!0;let t=Number(e);return Number.isInteger(t)&&t>=0},{message:e}).transform(e=>void 0===e?void 0:Number(e))}},function(e){e.O(0,[8310,1414,9522,411,278,8068,9859,5763,558,5184,1312,7648,584,815,8175,4032,769,2971,2117,1744],function(){return e(e.s=90719)}),_N_E=e.O()}]);