(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8282],{64007:function(e,t,s){Promise.resolve().then(s.bind(s,41957))},41957:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return X}});var a=s(57437),r=s(2265),n=s(99376),l=s(12381),i=s(99397),d=s(15868),c=s(18930),o=s(54977),u=s(27875),m=s(8164),x=s(41494),h=s(28207),f=s(25779);let p=e=>{let{sportIds:t}=e,{token:s,isTokenExpired:a}=(0,h.a)(),{isAdmin:r}=(0,f.a)(),n=(0,m.h)({queries:t.map(e=>({queryKey:["sport-podium",e],queryFn:()=>(0,x.rJC)({headers:{Authorization:"Bearer ".concat(s)},pathParams:{sportId:e}}),enabled:r()&&!a(),retry:0,staleTime:3e5}))});return{podiumsBySport:t.reduce((e,t,s)=>{let a=n[s];return a.data&&(e[t]=a.data),e},{}),isLoading:n.some(e=>e.isLoading),hasError:n.some(e=>e.error)}};var j=s(79820),g=s(49474),v=s(66142),N=s(33327);function b(e){let{results:t,title:s}=e,r=e=>{switch(e){case 1:return(0,a.jsx)(g.Z,{className:"h-6 w-6 text-yellow-500"});case 2:return(0,a.jsx)(v.Z,{className:"h-6 w-6 text-gray-400"});case 3:return(0,a.jsx)(N.Z,{className:"h-6 w-6 text-amber-600"});default:return(0,a.jsx)("span",{className:"h-6 w-6 flex items-center justify-center text-sm font-bold",children:e})}},n=e=>{switch(e){case 1:return"bg-yellow-50 border-yellow-200";case 2:return"bg-gray-50 border-gray-200";case 3:return"bg-amber-50 border-amber-200";default:return"bg-slate-50 border-slate-200"}},l=[...t].sort((e,t)=>e.rank-t.rank);return(0,a.jsxs)(j.Zb,{className:"w-full",children:[(0,a.jsx)(j.Ol,{children:(0,a.jsxs)(j.ll,{className:"flex items-center gap-2",children:[(0,a.jsx)(g.Z,{className:"h-5 w-5"}),s]})}),(0,a.jsx)(j.aY,{children:(0,a.jsx)("div",{className:"space-y-3",children:l.length>0?l.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg border ".concat(n(e.rank)),children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[r(e.rank),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-semibold",children:e.team.name}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:["\xc9quipe ID: ",e.team_id]})]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("p",{className:"font-bold text-lg",children:[e.points," pts"]}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:["#",e.rank]})]})]},"".concat(e.team_id,"-").concat(e.school_id))):(0,a.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:"Aucun r\xe9sultat disponible pour ce podium."})})})]})}var y=s(76715);function w(e){let{results:t,title:s}=e,{schools:r}=(0,y.A)(),n=e=>{switch(e){case 1:return(0,a.jsx)(g.Z,{className:"h-6 w-6 text-yellow-500"});case 2:return(0,a.jsx)(v.Z,{className:"h-6 w-6 text-gray-400"});case 3:return(0,a.jsx)(N.Z,{className:"h-6 w-6 text-amber-600"});default:return(0,a.jsx)("span",{className:"h-6 w-6 flex items-center justify-center text-sm font-bold",children:e})}},l=e=>{switch(e){case 1:return"bg-yellow-50 border-yellow-200";case 2:return"bg-gray-50 border-gray-200";case 3:return"bg-amber-50 border-amber-200";default:return"bg-slate-50 border-slate-200"}},i=[...t].sort((e,t)=>t.total_points-e.total_points).map((e,t)=>({...e,rank:t+1}));return(0,a.jsxs)(j.Zb,{className:"w-full",children:[(0,a.jsx)(j.Ol,{children:(0,a.jsxs)(j.ll,{className:"flex items-center gap-2",children:[(0,a.jsx)(g.Z,{className:"h-5 w-5"}),s]})}),(0,a.jsx)(j.aY,{children:(0,a.jsx)("div",{className:"space-y-3",children:i.length>0?i.map(e=>{let t=null==r?void 0:r.find(t=>t.id===e.school_id);return(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg border ".concat(l(e.rank)),children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[n(e.rank),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-semibold",children:(null==t?void 0:t.name)||"\xc9cole inconnue"}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:["ID: ",e.school_id]})]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("p",{className:"font-bold text-lg",children:[e.total_points," pts"]}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:["#",e.rank]})]})]},e.school_id)}):(0,a.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:"Aucun r\xe9sultat disponible pour ce podium."})})})]})}var k=s(13590),C=s(29501),P=s(80670),S=s(91115);let z=S.z.object({school_id:S.z.string().uuid("ID d'\xe9cole invalide"),sport_id:S.z.string().uuid("ID de sport invalide"),team_id:S.z.string().uuid("ID d'\xe9quipe invalide"),points:S.z.number().min(0,"Les points doivent \xeatre positifs")}),_=S.z.object({rankings:S.z.array(z).min(1,"Au moins un r\xe9sultat est requis")});var D=s(40279),I=s(15291),V=s(70399);function A(e){let{form:t,field:s,index:r,sportId:n,onRemove:i,showRemove:d}=e,o=t.watch("rankings.".concat(r,".school_id")),{teams:u}=(0,V.y)({sportId:n,schoolId:o}),{schools:m}=(0,y.A)();return(0,a.jsxs)("div",{className:"p-4 border rounded-lg space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("h4",{className:"font-medium",children:["R\xe9sultat #",r+1]}),d&&(0,a.jsx)(l.z,{type:"button",variant:"destructive",size:"sm",onClick:i,children:(0,a.jsx)(c.Z,{className:"h-4 w-4"})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsx)(P.Wi,{control:t.control,name:"rankings.".concat(r,".school_id"),render:e=>{let{field:s}=e;return(0,a.jsxs)(P.xJ,{children:[(0,a.jsx)(P.lX,{children:"\xc9cole"}),(0,a.jsxs)(I.Ph,{onValueChange:e=>{s.onChange(e),t.setValue("rankings.".concat(r,".team_id"),"")},defaultValue:s.value,children:[(0,a.jsx)(P.NI,{children:(0,a.jsx)(I.i4,{children:(0,a.jsx)(I.ki,{placeholder:"S\xe9lectionnez une \xe9cole"})})}),(0,a.jsx)(I.Bw,{children:null==m?void 0:m.map(e=>(0,a.jsx)(I.Ql,{value:e.id,children:e.name},e.id))})]}),(0,a.jsx)(P.zG,{})]})}}),(0,a.jsx)(P.Wi,{control:t.control,name:"rankings.".concat(r,".team_id"),render:e=>{let{field:t}=e;return(0,a.jsxs)(P.xJ,{children:[(0,a.jsx)(P.lX,{children:"\xc9quipe"}),(0,a.jsxs)(I.Ph,{onValueChange:t.onChange,defaultValue:t.value,disabled:!o,children:[(0,a.jsx)(P.NI,{children:(0,a.jsx)(I.i4,{children:(0,a.jsx)(I.ki,{placeholder:o?"S\xe9lectionnez une \xe9quipe":"S\xe9lectionnez d'abord une \xe9cole"})})}),(0,a.jsx)(I.Bw,{children:null==u?void 0:u.map(e=>(0,a.jsx)(I.Ql,{value:e.id,children:e.name},e.id))})]}),(0,a.jsx)(P.zG,{})]})}})]}),(0,a.jsx)(P.Wi,{control:t.control,name:"rankings.".concat(r,".points"),render:e=>{let{field:t}=e;return(0,a.jsxs)(P.xJ,{children:[(0,a.jsx)(P.lX,{children:"Points"}),(0,a.jsx)(P.NI,{children:(0,a.jsx)(D.I,{type:"number",min:"0",placeholder:"0",...t,onChange:e=>t.onChange(e.target.value?parseInt(e.target.value):0)})}),(0,a.jsx)(P.zG,{})]})}}),(0,a.jsx)(P.Wi,{control:t.control,name:"rankings.".concat(r,".sport_id"),render:e=>{let{field:t}=e;return(0,a.jsx)("input",{type:"hidden",...t,value:n})}})]},s.id)}function F(e){let{onSubmit:t,isLoading:s=!1,defaultValues:r,sportId:n,submitText:d="Mettre \xe0 jour le podium"}=e,c=(0,C.cI)({resolver:(0,k.F)(_),defaultValues:{rankings:(null==r?void 0:r.map(e=>({school_id:e.school_id,sport_id:e.sport_id,team_id:e.team_id,points:e.points})))||[{school_id:"",sport_id:n,team_id:"",points:0}]}}),{fields:o,append:u,remove:m}=(0,C.Dq)({control:c.control,name:"rankings"});return(0,a.jsx)(P.l0,{...c,children:(0,a.jsxs)("form",{onSubmit:c.handleSubmit(e=>{t(e)}),className:"space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold",children:"Classements"}),(0,a.jsxs)(l.z,{type:"button",variant:"outline",onClick:()=>{u({school_id:"",sport_id:n,team_id:"",points:0})},children:[(0,a.jsx)(i.Z,{className:"h-4 w-4 mr-2"}),"Ajouter un r\xe9sultat"]})]}),o.map((e,t)=>(0,a.jsx)(A,{form:c,field:e,index:t,sportId:n,onRemove:()=>m(t),showRemove:o.length>1},e.id))]}),(0,a.jsx)(l.z,{type:"submit",disabled:s,className:"w-full",children:s?"Chargement...":d})]})})}var R=s(71594),Z=s(24525),L=s(33804),q=s(28842),E=s(67782),B=s(32060),G=s(69174),M=s(84834),K=s(20653);function H(e){var t,s;let{table:r}=e,n=r.getState().columnFilters.length>0;return(0,a.jsx)("div",{className:"flex flex-wrap items-center justify-between gap-2 py-4",children:(0,a.jsxs)("div",{className:"flex flex-1 items-center gap-2 flex-wrap",children:[(0,a.jsx)(D.I,{placeholder:"Rechercher un sport...",value:null!==(s=null===(t=r.getColumn("searchField"))||void 0===t?void 0:t.getFilterValue())&&void 0!==s?s:"",onChange:e=>{var t;return null===(t=r.getColumn("searchField"))||void 0===t?void 0:t.setFilterValue(e.target.value)},className:"h-8 max-w-sm"}),n&&(0,a.jsxs)(l.z,{variant:"ghost",onClick:()=>r.resetColumnFilters(),className:"h-8 px-2 lg:px-3",children:["R\xe9initialiser",(0,a.jsx)(K.Pxu,{className:"ml-2 h-4 w-4"})]})]})})}function O(e){let{data:t,onEditSport:s,onDeletePodium:n,isLoading:i,isDeleteLoading:o}=e,[u,m]=r.useState([]),[x,h]=r.useState([]),[f,p]=r.useState({}),j=[{id:"searchField",accessorFn:e=>"".concat(e.name).toLowerCase(),filterFn:(e,t,s)=>{let a=s.toLowerCase();return e.getValue("name").toLowerCase().includes(a)}},{accessorKey:"name",header:e=>{let{column:t}=e;return(0,a.jsxs)(l.z,{variant:"ghost",onClick:()=>t.toggleSorting("asc"===t.getIsSorted()),className:"flex items-center justify-center w-full",children:["Sport",(0,a.jsx)(q.Z,{className:"ml-2 h-4 w-4"})]})},cell:e=>{let{row:t}=e;return(0,a.jsx)("div",{className:"font-medium text-center",children:t.getValue("name")})}},{accessorKey:"firstPlace",header:()=>(0,a.jsx)("div",{className:"flex items-center justify-center",children:"\uD83E\uDD47 1\xe8re place"}),cell:e=>{let{row:t}=e;return(0,a.jsx)("div",{className:"font-medium text-center",children:t.getValue("firstPlace")?(0,a.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,a.jsx)("span",{className:"text-yellow-500",children:"\uD83E\uDD47"}),(0,a.jsx)("span",{children:t.getValue("firstPlace")})]}):(0,a.jsx)("span",{className:"text-muted-foreground italic",children:"Non d\xe9finie"})})}},{accessorKey:"secondPlace",header:()=>(0,a.jsx)("div",{className:"flex items-center justify-center",children:"\uD83E\uDD48 2\xe8me place"}),cell:e=>{let{row:t}=e;return(0,a.jsx)("div",{className:"font-medium text-center",children:t.getValue("secondPlace")?(0,a.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,a.jsx)("span",{className:"text-gray-400",children:"\uD83E\uDD48"}),(0,a.jsx)("span",{children:t.getValue("secondPlace")})]}):(0,a.jsx)("span",{className:"text-muted-foreground italic",children:"Non d\xe9finie"})})}},{accessorKey:"thirdPlace",header:()=>(0,a.jsx)("div",{className:"flex items-center justify-center",children:"\uD83E\uDD49 3\xe8me place"}),cell:e=>{let{row:t}=e;return(0,a.jsx)("div",{className:"font-medium text-center",children:t.getValue("thirdPlace")?(0,a.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,a.jsx)("span",{className:"text-amber-600",children:"\uD83E\uDD49"}),(0,a.jsx)("span",{children:t.getValue("thirdPlace")})]}):(0,a.jsx)("span",{className:"text-muted-foreground italic",children:"Non d\xe9finie"})})}},{accessorKey:"active",header:e=>{let{column:t}=e;return(0,a.jsxs)(l.z,{variant:"ghost",onClick:()=>t.toggleSorting("asc"===t.getIsSorted()),className:"flex items-center justify-center w-full",children:["Statut",(0,a.jsx)(q.Z,{className:"ml-2 h-4 w-4"})]})},cell:e=>{let{row:t}=e;return(0,a.jsx)("div",{className:"text-center",children:t.getValue("active")?(0,a.jsx)(G.C,{variant:"secondary",className:"bg-green-100 text-green-800 hover:bg-green-200",children:"Actif"}):(0,a.jsx)(G.C,{variant:"destructive",children:"Inactif"})})},filterFn:(e,t,s)=>{if(void 0===s)return!0;let a=e.getValue(t);return!0===s?!0===a:!a}},{id:"actions",header:()=>(0,a.jsx)("div",{className:"text-right",children:"Actions"}),cell:e=>{let{row:t}=e,r=t.original;return(0,a.jsx)("div",{className:"flex justify-end",children:(0,a.jsxs)(B.h_,{children:[(0,a.jsx)(B.$F,{asChild:!0,children:(0,a.jsxs)(l.z,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",disabled:i||o,children:[(0,a.jsx)(E.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Ouvrir le menu"})]})}),(0,a.jsxs)(B.AW,{align:"end",children:[(0,a.jsxs)(B.Xi,{onClick:()=>s(r.id),disabled:i,children:[(0,a.jsx)(d.Z,{className:"mr-2 h-4 w-4"}),"G\xe9rer le podium"]}),(0,a.jsxs)(B.Xi,{onClick:()=>n(r.id),disabled:o,className:"text-destructive focus:text-destructive",children:[(0,a.jsx)(c.Z,{className:"mr-2 h-4 w-4"}),"Supprimer le podium"]})]})]})})}}];r.useEffect(()=>{p(e=>({...e,searchField:!1}))},[]);let g=(0,R.b7)({data:t,columns:j,state:{sorting:u,columnFilters:x,columnVisibility:f},onSortingChange:m,onColumnFiltersChange:h,onColumnVisibilityChange:p,getCoreRowModel:(0,Z.sC)(),getFilteredRowModel:(0,Z.vL)(),getPaginationRowModel:(0,Z.G_)(),getSortedRowModel:(0,Z.tj)()});return(0,a.jsxs)("div",{children:[(0,a.jsx)(H,{table:g}),(0,a.jsx)("div",{className:"rounded-md border",children:(0,a.jsxs)(L.iA,{children:[(0,a.jsx)(L.xD,{children:g.getHeaderGroups().map(e=>(0,a.jsx)(L.SC,{children:e.headers.map(e=>"searchField"===e.id?null:(0,a.jsx)(L.ss,{className:"actions"===e.id?"text-right":"",children:e.isPlaceholder?null:(0,R.ie)(e.column.columnDef.header,e.getContext())},e.id))},e.id))}),(0,a.jsx)(L.RM,{children:g.getRowModel().rows.length>0?g.getRowModel().rows.sort((e,t)=>e.getValue("name").localeCompare(t.getValue("name"))).map(e=>(0,a.jsx)(L.SC,{children:e.getVisibleCells().map(e=>"searchField"===e.column.id?null:(0,a.jsx)(L.pj,{className:"actions"===e.column.id?"text-right":"",children:(0,R.ie)(e.column.columnDef.cell,e.getContext())},e.id))},e.id)):(0,a.jsx)(L.SC,{children:(0,a.jsx)(L.pj,{colSpan:j.length-1,className:"text-center py-4 text-muted-foreground",children:"Aucun sport trouv\xe9"})})})]})}),(0,a.jsx)("div",{className:"mt-4",children:(0,a.jsx)(M.k,{table:g,selectedLabel:"sport(s) s\xe9lectionn\xe9(s)",itemsPerPageLabel:"Sports par page",showSelectedCount:!1})})]})}var W=s(74291);function X(){var e;let t=(0,n.useSearchParams)(),s=t.get("sport_id"),m=t.get("school_id"),{sports:x}=(0,u.V)(),{podiumsBySport:h}=p({sportIds:(null==x?void 0:x.map(e=>e.id))||[]}),{globalPodium:f,sportPodium:j,schoolPodium:g,createOrUpdateSportPodium:v,deleteSportPodium:N,isGlobalLoading:y,isSportLoading:k,isSchoolLoading:C,isUpdateLoading:P,isDeleteLoading:S}=(0,o.y)({sportId:s||void 0,schoolId:m||void 0}),[z,_]=(0,r.useState)(!1),[D,V]=(0,r.useState)(""),A=e=>{N(e,()=>{})},R=e=>{V(e),_(!0)};return y?(0,a.jsxs)("div",{className:"container mx-auto p-6",children:[(0,a.jsx)("div",{className:"flex justify-between items-center mb-6",children:(0,a.jsx)("h1",{className:"text-3xl font-bold",children:"Gestion des podiums"})}),(0,a.jsx)("div",{className:"text-center",children:"Chargement..."})]}):(0,a.jsxs)("div",{className:"container mx-auto p-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold",children:"Gestion des podiums"}),(0,a.jsxs)(W.Vq,{open:z,onOpenChange:_,children:[(0,a.jsx)(W.hg,{asChild:!0,children:(0,a.jsxs)(l.z,{onClick:()=>_(!0),children:[(0,a.jsx)(i.Z,{className:"h-4 w-4 mr-2"}),"G\xe9rer un podium"]})}),(0,a.jsxs)(W.cZ,{className:"max-w-4xl max-h-[80vh] overflow-y-auto",children:[(0,a.jsxs)(W.fK,{children:[(0,a.jsx)(W.$N,{children:"G\xe9rer le podium d'un sport"}),(0,a.jsx)(W.Be,{children:"S\xe9lectionnez un sport et configurez son podium."})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Sport"}),(0,a.jsxs)(I.Ph,{value:D,onValueChange:V,children:[(0,a.jsx)(I.i4,{children:(0,a.jsx)(I.ki,{placeholder:"S\xe9lectionnez un sport"})}),(0,a.jsx)(I.Bw,{children:null==x?void 0:x.map(e=>(0,a.jsx)(I.Ql,{value:e.id,children:e.name},e.id))})]})]}),D&&(0,a.jsx)(F,{onSubmit:e=>{D&&v(D,e,()=>{_(!1),V("")})},isLoading:P,sportId:D,submitText:"Mettre \xe0 jour le podium"})]})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:[(0,a.jsx)("div",{className:"lg:col-span-2 xl:col-span-3",children:(0,a.jsx)(w,{results:f||[],title:"Podium Global"})}),s&&!C&&(0,a.jsxs)("div",{className:"lg:col-span-2 xl:col-span-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold",children:"Podium du sport s\xe9lectionn\xe9"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(l.z,{size:"sm",variant:"outline",onClick:()=>R(s),children:[(0,a.jsx)(d.Z,{className:"h-4 w-4 mr-2"}),"Modifier"]}),(0,a.jsxs)(l.z,{size:"sm",variant:"destructive",onClick:()=>A(s),disabled:S,children:[(0,a.jsx)(c.Z,{className:"h-4 w-4 mr-2"}),"Supprimer"]})]})]}),(0,a.jsx)(b,{results:j||[],title:"Podium - ".concat((null==x?void 0:null===(e=x.find(e=>e.id===s))||void 0===e?void 0:e.name)||"Sport s\xe9lectionn\xe9")})]}),m&&!C&&(0,a.jsxs)("div",{className:"lg:col-span-1 xl:col-span-1",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Podium de l'\xe9cole s\xe9lectionn\xe9e"}),(0,a.jsx)(b,{results:g||[],title:"Podium \xc9cole"})]}),(0,a.jsxs)("div",{className:"lg:col-span-2 xl:col-span-3",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Gestion des podiums par sport"}),(0,a.jsx)(O,{data:(null==x?void 0:x.map(e=>{var t,s,a,r,n,l,i;let d=h[e.id],c=d?[...d].sort((e,t)=>e.rank-t.rank):[];return{id:e.id,name:e.name,active:null===(i=e.active)||void 0===i||i,firstPlace:(null===(s=c.find(e=>1===e.rank))||void 0===s?void 0:null===(t=s.team)||void 0===t?void 0:t.name)||null,secondPlace:(null===(r=c.find(e=>2===e.rank))||void 0===r?void 0:null===(a=r.team)||void 0===a?void 0:a.name)||null,thirdPlace:(null===(l=c.find(e=>3===e.rank))||void 0===l?void 0:null===(n=l.team)||void 0===n?void 0:n.name)||null}}))||[],onEditSport:R,onDeletePodium:A,isLoading:P,isDeleteLoading:S})]})]})]})}},79820:function(e,t,s){"use strict";s.d(t,{Ol:function(){return i},SZ:function(){return c},Zb:function(){return l},aY:function(){return o},eW:function(){return u},ll:function(){return d}});var a=s(57437),r=s(2265),n=s(94508);let l=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...r})});l.displayName="Card";let i=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",s),...r})});i.displayName="CardHeader";let d=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("h3",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",s),...r})});d.displayName="CardTitle";let c=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("p",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",s),...r})});c.displayName="CardDescription";let o=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",s),...r})});o.displayName="CardContent";let u=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",s),...r})});u.displayName="CardFooter"},74291:function(e,t,s){"use strict";s.d(t,{$N:function(){return f},Be:function(){return p},Vq:function(){return d},cN:function(){return h},cZ:function(){return m},fK:function(){return x},hg:function(){return c}});var a=s(57437),r=s(2265),n=s(49027),l=s(32489),i=s(94508);let d=n.fC,c=n.xz,o=n.h_;n.x8;let u=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(n.aV,{ref:t,className:(0,i.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...r})});u.displayName=n.aV.displayName;let m=r.forwardRef((e,t)=>{let{className:s,children:r,hideClose:d,...c}=e;return(0,a.jsxs)(o,{children:[(0,a.jsx)(u,{}),(0,a.jsxs)(n.VY,{ref:t,className:(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...c,children:[r,!d&&(0,a.jsxs)(n.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,a.jsx)(l.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});m.displayName=n.VY.displayName;let x=e=>{let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...s})};x.displayName="DialogHeader";let h=e=>{let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,i.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...s})};h.displayName="DialogFooter";let f=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(n.Dx,{ref:t,className:(0,i.cn)("text-lg font-semibold leading-none tracking-tight",s),...r})});f.displayName=n.Dx.displayName;let p=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(n.dk,{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",s),...r})});p.displayName=n.dk.displayName},80670:function(e,t,s){"use strict";s.d(t,{NI:function(){return p},Wi:function(){return u},l0:function(){return c},lX:function(){return f},pf:function(){return j},xJ:function(){return h},zG:function(){return g}});var a=s(57437),r=s(2265),n=s(37053),l=s(29501),i=s(94508),d=s(75060);let c=l.RV,o=r.createContext({}),u=e=>{let{...t}=e;return(0,a.jsx)(o.Provider,{value:{name:t.name},children:(0,a.jsx)(l.Qr,{...t})})},m=()=>{let e=r.useContext(o),t=r.useContext(x),{getFieldState:s,formState:a}=(0,l.Gc)(),n=s(e.name,a);if(!e)throw Error("useFormField should be used within <FormField>");let{id:i}=t;return{id:i,name:e.name,formItemId:"".concat(i,"-form-item"),formDescriptionId:"".concat(i,"-form-item-description"),formMessageId:"".concat(i,"-form-item-message"),...n}},x=r.createContext({}),h=r.forwardRef((e,t)=>{let{className:s,...n}=e,l=r.useId();return(0,a.jsx)(x.Provider,{value:{id:l},children:(0,a.jsx)("div",{ref:t,className:(0,i.cn)("space-y-2",s),...n})})});h.displayName="FormItem";let f=r.forwardRef((e,t)=>{let{className:s,...r}=e,{error:n,formItemId:l}=m();return(0,a.jsx)(d._,{ref:t,className:(0,i.cn)(n&&"text-destructive",s),htmlFor:l,...r})});f.displayName="FormLabel";let p=r.forwardRef((e,t)=>{let{...s}=e,{error:r,formItemId:l,formDescriptionId:i,formMessageId:d}=m();return(0,a.jsx)(n.g7,{ref:t,id:l,"aria-describedby":r?"".concat(i," ").concat(d):"".concat(i),"aria-invalid":!!r,...s})});p.displayName="FormControl";let j=r.forwardRef((e,t)=>{let{className:s,...r}=e,{formDescriptionId:n}=m();return(0,a.jsx)("p",{ref:t,id:n,className:(0,i.cn)("text-sm text-muted-foreground",s),...r})});j.displayName="FormDescription";let g=r.forwardRef((e,t)=>{let{className:s,children:r,...n}=e,{error:l,formMessageId:d}=m(),c=l?String(null==l?void 0:l.message):r;return c?(0,a.jsx)("p",{ref:t,id:d,className:(0,i.cn)("text-sm font-medium text-destructive",s),...n,children:c}):null});g.displayName="FormMessage"},75060:function(e,t,s){"use strict";s.d(t,{_:function(){return c}});var a=s(57437),r=s(2265),n=s(6394),l=s(90535),i=s(94508);let d=(0,l.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(n.f,{ref:t,className:(0,i.cn)(d(),s),...r})});c.displayName=n.f.displayName},54977:function(e,t,s){"use strict";s.d(t,{y:function(){return i}});var a=s(41494),r=s(25779),n=s(28207),l=s(18752);let i=e=>{let{token:t,isTokenExpired:s}=(0,n.a)(),{isAdmin:i}=(0,r.a)(),{sportId:d,schoolId:c}=e||{},{data:o,isLoading:u,refetch:m,error:x}=(0,a.pDX)({headers:{Authorization:"Bearer ".concat(t)}},{enabled:i()&&!s(),retry:0,queryHash:"getGlobalPodium"}),{data:h,isLoading:f,refetch:p,error:j}=(0,a.zZz)({headers:{Authorization:"Bearer ".concat(t)},pathParams:{sportId:d}},{enabled:!!d&&i()&&!s(),retry:0,queryHash:"getSportPodium-".concat(d)}),{data:g,isLoading:v,refetch:N,error:b}=(0,a.cQS)({headers:{Authorization:"Bearer ".concat(t)},pathParams:{schoolId:c}},{enabled:!!c&&i()&&!s(),retry:0,queryHash:"getSchoolPodium-".concat(c)}),{mutate:y,isPending:w}=(0,a.$qn)(),{mutate:k,isPending:C}=(0,a.R9Y)();return{globalPodium:o,sportPodium:h,schoolPodium:g,createOrUpdateSportPodium:(e,s,a)=>y({headers:{Authorization:"Bearer ".concat(t)},pathParams:{sportId:e},body:s},{onSettled:(t,s)=>{s.stack.body||s.stack.detail?(console.log(s),(0,l.Am)({title:"Erreur lors de la mise \xe0 jour du podium",description:s.stack.body||s.stack.detail,variant:"destructive"})):(m(),d===e&&p(),a(),(0,l.Am)({title:"Podium mis \xe0 jour",description:"Le podium a \xe9t\xe9 mis \xe0 jour avec succ\xe8s."}))}}),deleteSportPodium:(e,s)=>k({headers:{Authorization:"Bearer ".concat(t)},pathParams:{sportId:e}},{onSettled:(t,a)=>{a.stack.body||a.stack.detail?(console.log(a),(0,l.Am)({title:"Erreur lors de la suppression du podium",description:a.stack.body||a.stack.detail,variant:"destructive"})):(m(),d===e&&p(),s(),(0,l.Am)({title:"Podium supprim\xe9",description:"Le podium a \xe9t\xe9 supprim\xe9 avec succ\xe8s."}))}}),isGlobalLoading:u,isSportLoading:f,isSchoolLoading:v,isUpdateLoading:w,isDeleteLoading:C,globalError:x,sportError:j,schoolError:b,refetchGlobalPodium:m,refetchSportPodium:p,refetchSchoolPodium:N}}},76715:function(e,t,s){"use strict";s.d(t,{A:function(){return i}});var a=s(41494),r=s(25779),n=s(28207),l=s(18752);let i=()=>{let{token:e,isTokenExpired:t}=(0,n.a)(),{isAdmin:s}=(0,r.a)(),{data:i,isLoading:d,refetch:c,error:o}=(0,a.sd3)({headers:{Authorization:"Bearer ".concat(e)}},{enabled:s()&&!t(),retry:0,queryHash:"getSchools"}),{mutate:u,isPending:m}=(0,a._7_)(),{mutate:x,isPending:h}=(0,a.mK8)(),f=null==i?void 0:i.filter(e=>"dce19aa2-8863-4c93-861e-fb7be8f610ed"!==e.id);return{schools:i,filteredSchools:f,createSchool:(t,s)=>u({headers:{Authorization:"Bearer ".concat(e)},body:t},{onSettled:(e,t)=>{t.stack.body||t.stack.detail?(console.log(t),(0,l.Am)({title:"Erreur lors de l'ajout de l'\xe9tablissement",description:t.stack.body||t.stack.detail,variant:"destructive"})):(c(),s(),(0,l.Am)({title:"\xc9tablissement ajout\xe9",description:"L'\xe9tablissement a \xe9t\xe9 ajout\xe9 avec succ\xe8s."}))}}),updateSchool:(t,s,a)=>x({headers:{Authorization:"Bearer ".concat(e)},body:s,pathParams:{schoolId:t}},{onSettled:(e,t)=>{t.stack.body||t.stack.detail?(console.log(t),(0,l.Am)({title:"Erreur lors de la modification de l'\xe9tablissement",description:t.stack.body||t.stack.detail,variant:"destructive"})):(c(),a(),(0,l.Am)({title:"\xc9tablissement modifi\xe9",description:"L'\xe9tablissement a \xe9t\xe9 modifi\xe9 avec succ\xe8s."}))}}),error:o,isLoading:d,isCreateLoading:m,isUpdateLoading:h,refetchSchools:c}}},70399:function(e,t,s){"use strict";s.d(t,{y:function(){return n}});var a=s(41494),r=s(28207);let n=e=>{let{sportId:t,schoolId:s}=e,{token:n,isTokenExpired:l}=(0,r.a)(),{data:i,isLoading:d,refetch:c,error:o}=(0,a.NNw)({headers:{Authorization:"Bearer ".concat(n)},pathParams:{sportId:t,schoolId:s}},{enabled:!!t&&!!s&&!l(),retry:0,queryHash:"getTeams-".concat(t,"-").concat(s)});return{teams:i,isLoading:d,error:o,refetchTeams:c}}}},function(e){e.O(0,[8310,1414,9522,411,278,8068,9859,5763,558,5184,584,1527,8175,4032,2971,2117,1744],function(){return e(e.s=64007)}),_N_E=e.O()}]);